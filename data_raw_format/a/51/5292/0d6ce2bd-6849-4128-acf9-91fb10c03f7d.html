<html class=" js no-touch rgba cssgradients" style="" lang="en"><!--<![endif]--><!-- Content Copyright OHSU --><!-- Page generated 2017-06-20 19:38:46 on server 7 by CommonSpot Summer 2012 Build 8.0.4.305 (2015-05-13 13:46:19) --><!-- JavaScript & DHTML Code Copyright &copy; 1998-2015, PaperThin, Inc. All Rights Reserved. --><head><meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- // csonly:start -->
<iframe src="javascript:false" title="" style="width: 0px; height: 0px; border: 0px none; display: none;"></iframe><script type="text/javascript" async="" src="//static.hotjar.com/c/hotjar-338115.js?sv=5"></script><script async="" src="//www.googletagmanager.com/gtm.js?id=GTM-TRPDVK&amp;l=HCMdataLayer"></script><script async="" src="//www.googletagmanager.com/gtm.js?id=GTM-5K25KJ"></script><script>
(function(){
if(window.BOOMR && window.BOOMR.version){return;}
var dom,doc,where,iframe = document.createElement('iframe');
iframe.src = "javascript:false";
iframe.title = ""; iframe.role="presentation";
(iframe.frameElement || iframe).style.cssText = "width:0;height:0;border:0;display:none;";
where = document.getElementsByTagName('script')[0];
where.parentNode.insertBefore(iframe, where);
try {
doc = iframe.contentWindow.document;
} catch(e) {
dom = document.domain;
iframe.src="javascript:var d=document.open();d.domain='"+dom+"';void(0);";
doc = iframe.contentWindow.document;
}
doc.open()._l = function() {
var js = this.createElement("script");
if(dom) this.domain = dom;
js.id = "boomr-if-as";
js.src = '//c.go-mpulse.net/boomerang/' +
'27RY7-GV7UN-QPY93-WFRDF-YXG9L';
BOOMR_lstart=new Date().getTime();
this.body.appendChild(js);
};
doc.write('<body onload="document._l();">');
doc.close();
})();
</script>
<script src="https://cdn.optimizely.com/js/2347060658.js"></script>
<!-- // csonly:end -->
<script>
var searchapps_host = "http://www.ohsu.edu";
// set up author/developer variables
var isDeveloper = 'false';
var isAuthor = 'false';
// introduce a "docReady" function so the developers can make calls to jQuery(function(){}) inside their code https://github.com/jfriend00/docReady
(function(funcName, baseObj) {
// The public function name defaults to window.docReady
// but you can pass in your own object and own function name and those will be used
// if you want to put them in a different namespace
funcName = funcName || "docReady";
baseObj = baseObj || window;
var readyList = [];
var readyFired = false;
var readyEventHandlersInstalled = false;
// call this when the document is ready
// this function protects itself against being called more than once
function ready() {
if (!readyFired) {
// this must be set to true before we start calling callbacks
readyFired = true;
for (var i = 0; i < readyList.length; i++) {
// if a callback here happens to add new ready handlers,
// the docReady() function will see that it already fired
// and will schedule the callback to run right after
// this event loop finishes so all handlers will still execute
// in order and no new ones will be added to the readyList
// while we are processing the list
readyList[i].fn.call(window, readyList[i].ctx);
}
// allow any closures held by these functions to free
readyList = [];
}
}
function readyStateChange() {
if ( document.readyState === "complete" ) {
ready();
}
}
// This is the one public interface
// docReady(fn, context);
// the context argument is optional - if present, it will be passed
// as an argument to the callback
baseObj[funcName] = function(callback, context) {
// if ready has already fired, then just schedule the callback
// to fire asynchronously, but right away
if (readyFired) {
setTimeout(function() {callback(context);}, 1);
return;
} else {
// add the function and context to the list
readyList.push({fn: callback, ctx: context});
}
// if document already ready to go, schedule the ready function to run
if (document.readyState === "complete") {
setTimeout(ready, 1);
} else if (!readyEventHandlersInstalled) {
// otherwise if we don't have event handlers installed, install them
if (document.addEventListener) {
// first choice is DOMContentLoaded event
document.addEventListener("DOMContentLoaded", ready, false);
// backup is window load event
window.addEventListener("load", ready, false);
} else {
// must be IE
document.attachEvent("onreadystatechange", readyStateChange);
window.attachEvent("onload", ready);
}
readyEventHandlersInstalled = true;
}
}
})("docReady", window);
</script>
<script src="/xd/assets/js/head.js"></script>
<title>People | Molecular Microbiology &amp; Immunology | OHSU</title>
<meta name="Description" id="Description" content="Molecular Microbiology &amp; Immunology People">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="Keywords" id="Keywords" content="molecular microbiology immunology bacteriology parasitology virology">
<meta name="Generator" id="Generator" content="CommonSpot Summer 2012 Build 8.0.4.305">
<link rel="stylesheet" href="/xd/assets/css/rte.css" type="text/css">
<style type="text/css">
.mw { color:#000000;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none; }
a.mw:link	{color:#000000;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none;}
a.mw:visited	{color:#000000;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none;}
a.mw:hover	{color:#0000FF;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none;}
</style> <script type="text/javascript">
<!--
var gMenuControlID = 0;
var menus_included = 0;
var jsDlgLoader = '/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/loader.cfm';
var jsSiteID = 3;
var jsSubSiteID = 3080;
var js_gvPageID = 1929733;
var jsPageID = 1929733;
var jsPageSetID = 0;
var jsPageType = 0;
var jsControlsWithRenderHandlers = ",3,3,3,3,3,3,4,4,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,9,9,10,10,10,11,20,20,23,23,23,36,36,36,36,36,36,36,36,36,36,36,36,39,41,43,53,1368,1373,1396,1432,1432,1432,1463,1769,1785,1785,1785,1785,1785,1785,1785,1785,1785,1952,1952,1952,1952,1952,1952,1952,2159,2427,4067,5198,5228,31048,31188,37603,37603,37603,117885,117885,117885,117885,182086,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306020,306160,306160,306160,306160,306160,306160,306160,306160,306160,554092,876097,1096995,1096995,1096995,1096995,1329767,1336639,1363718,1955863,2295874,2331090,2341328,2341336,2537075,2537097,2537127,2537135,2537141,2537149,2537160,2537167,2537176,2537184,2537197,2537205,2537210,2676188,2676188,2738261,2776748,2794349,2794388,2794431,2821720,2822758,2876919,2876936,2876981,2877000,";
var jsDefaultRenderHandlerProps = ",3_2,3_1,4_2,4_1,11_1,11_2,11_1,11_2,20_2,20_1,36_2,36_1,39_2,39_1,53_2,53_1,1368_1,1463_1,1785_1,2427_1,4067_1,4067_1,5198_1,31048_1,31188_1,37603_1,876097_1,1329767_1,1336639_1,1363718_1,2537075_1,2537075_1,2537097_1,2537097_1,2537127_1,2537127_1,2537135_1,2537135_1,2537141_1,2537141_1,2537149_1,2537149_1,2537167_1,2537167_1,2537176_1,2537176_1,2537184_1,2537184_1,2537197_1,2537197_1,2537205_1,2537205_1,2537210_1,2537210_1,2676188_1,2676188_1,2776748_1,2776748_1,2794349_1,2794349_1,2794388_1,2794388_1,2794431_1,2794431_1,2821720_1,2821720_1,2822758_1,2822758_1,2876919_1,2876919_1,2876936_1,2876936_1,2876981_1,2876981_1,2877000_1,2877000_1,";
var jsAuthorizedControls = ",1,2,3,4,6,7,8,9,10,11,16,18,20,21,22,23,25,26,27,28,29,30,31,34,36,39,40,41,42,43,45,46,47,50,51,52,53,54,1346,1368,1373,1394,1396,1432,1463,1769,1777,1785,1952,2159,2427,2676,4067,5065,5198,5228,7300,7929,13243,13980,14560,14604,15216,17317,20591,21551,23172,25221,25388,28225,29266,29320,29323,29738,31048,31116,31188,33196,36287,37603,39858,40610,40641,40643,41399,41411,50996,58426,87122,87625,94735,96076,96107,117885,120581,120583,120689,122582,146304,148876,148880,176999,178139,178156,178266,178814,178821,178922,180639,182086,183719,233776,245420,250425,253510,266204,271897,272214,306020,306160,307651,474660,474804,475971,475973,475975,475977,483250,525411,527861,554092,637435,637543,755532,755535,755537,755620,756021,756023,756025,756045,757961,763463,787162,787464,787473,793153,820187,845179,848136,854166,854168,854170,854174,854389,876097,876430,883202,904723,906396,906398,906403,906419,907899,908089,908772,912975,935861,943210,943215,943293,943436,964631,964638,968507,997735,1003021,1003027,1096995,1098034,1100428,1131590,1131594,1131602,1133446,1133449,1133513,1156448,1156747,1156839,1156901,1157030,1157504,1157680,1159629,1160767,1160946,1162636,1162696,1163394,1163603,1163643,1163645,1163647,1163662,1163664,1163838,1185243,1186434,1186436,1186613,1192367,1192410,1192434,1221456,1221466,1222798,1234724,1234801,1256267,1256290,1256346,1256414,1256423,1256425,1256438,1262538,1262541,1263074,1284524,1305664,1311236,1329767,1336639,1343476,1343605,1346803,1346851,1346854,1346859,1353142,1354252,1354254,1354257,1354260,1357298,1361124,1363718,1366589,1368136,1379039,1381137,1382005,1382066,1382336,1405109,1413393,1413831,1435883,1438044,1454386,1470075,1472304,1473074,1497357,1506464,1534788,1537517,1544020,1568115,1570088,1570099,1570123,1570433,1594552,1595451,1595468,1599948,1604144,1604350,1604502,1628373,1630547,1655722,1659443,1659445,1659499,1661250,1661253,1662249,1662252,1662326,1662328,1662988,1684624,1684813,1687299,1687480,1691387,1691409,1691499,1691812,1692404,1692611,1694377,1717082,1718414,1719070,1719084,1719279,1719314,1719751,1721614,1722468,1734659,1734904,1735039,1736539,1739538,1739830,1765162,1768464,1826635,1827051,1827056,1827886,1848828,1848838,1851680,1852566,1854722,1857186,1858913,1860935,1873289,1873864,1878316,1880615,1884642,1888692,1899349,1899443,1900056,1901222,1904051,1904704,1904706,1904723,1904725,1904736,1904738,1904905,1904939,1906328,1908787,1908833,1909398,1909400,1909402,1909404,1909406,1909408,1909410,1909412,1909414,1909418,1909420,1909422,1909424,1909427,1909429,1909435,1909437,1909439,1909441,1909443,1909445,1909882,1910337,1910987,1911378,1914622,1914863,1914944,1917910,1918136,1921388,1924631,1931488,1931491,1931494,1931816,1931834,1931937,1932364,1933925,1935497,1938129,1940462,1940475,1942695,1943862,1943864,1953490,1955863,1964820,1992050,1992052,1992054,2038842,2071470,2117867,2120081,2133102,2137806,2197900,2207019,2214260,2217364,2236397,2249206,2290222,2295874,2313237,2331090,2341328,2341336,2416074,2423047,2443048,2447044,2450216,2455671,2455674,2466374,2469294,2473027,2475609,2475762,2476786,2476821,2479195,2479470,2490096,2517900,2520002,2520007,2521838,2521846,2529145,2529438,2534704,2537075,2537097,2537127,2537135,2537141,2537149,2537160,2537167,2537176,2537184,2537197,2537205,2537210,2561085,2561087,2561247,2574694,2574746,2576076,2593729,2609943,2616160,2616165,2618919,2625724,2626365,2632355,2636948,2648036,2676188,2676606,2682848,2694859,2738261,2742744,2756472,2761595,2764322,2768138,2774550,2776748,2793359,2794349,2794364,2794388,2794431,2794777,2795481,2799826,2803829,2810287,2818192,2821720,2822758,2834882,2836066,2839079,2858644,2858646,2858648,2858650,2866249,2870764,2876919,2876936,2876981,2877000,2878755,2880516,2882552,2902801,2909768,2909770,2909772,";
var jsCustomRenderHandlerPairs = "";
var jsStandardRenderHandlers = "";
var jsSiteSecurityCreateControls = 0;
var jsShowRejectForApprover = 1;
// -->
</script><script type="text/javascript" src="/commonspot/javascript/browser-all.js"></script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Molecular Microbiology &amp; Immunology People">
<meta name="title" content="People">
<meta property="og:title" content="People">
<meta property="og:url" content="http://www.ohsu.edu/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/index.cfm">
<meta property="og:site_name" content="Oregon Health &amp; Science University">
<meta name="msvalidate.01" content="12518BFD0DB6729C66845DA7F6282FC5">
<!-- icon and tile color in hex # for Windows phones -->
<meta name="msapplication-TileImage" content="/xd/assets/img/content/touch-icon.png">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="People">
<link rel="shortcut icon" href="/favicon.ico?v=2">
<!-- Serve one icon for all Apple devices -->
<link rel="apple-touch-icon-precomposed" href="/xd/assets/img/content/touch-icon.png">
<link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" media="all" href="/xd/assets/css/style.css">
<style>.template-full-width .nav-home{text-indent:none!important}#browser_warning{background-color:#f8d4d4}.nav-breadcrumbs li.hide,.show-later{display:none}</style>
<!--[if lte IE 8]>
<script src="/xd/assets/js/oldie.js"></script>
<![endif]-->
<link rel="stylesheet" href="/commonspot/commonspot.css" type="text/css" id="cs_maincss"> <script id="cs_util_js" type="text/javascript" src="/commonspot/javascript/util.js">/*
 * bring browser up to speed somewhat
 * NOTE: THESE PROTOTYPE METHODS ARE DUPLICATED IN util.js AND nondashboard-utils.js
 * 		KEEP THEM IDENTICAL
 */
if(!String.prototype.trim)
{
	String.prototype.trim = function()
	{
		var start = -1;
		var end = this.length;
		while(this.charCodeAt(--end) < 33);
		while(this.charCodeAt(++start) < 33);
		return this.slice(start, end + 1);
	};
}
if(!String.prototype.toBoolean)
{
	String.prototype.toBoolean = function()
	{
		switch(this.valueOf())
		{
			case "1":
				return true;
				break;
			case "0": case "": case "no": case "false":
			case "No": case "False": case "NO": case "FALSE":
				return false;
				break;
			default:
				return true;
		}
	};
}
if(!Array.prototype.indexOf)
{
	Array.prototype.indexOf = function(value, fromIndex)
	{
		var len = this.length;
		if(fromIndex == null)
			fromIndex = 0;
		else if(fromIndex < 0)
			fromIndex = Math.max(0, len + fromIndex);
		for(var i = fromIndex; i < len; i++)
		{
			if(this[i] === value)
				return i;
		}
		return -1;
	};
}
var EventCache=function() 
{
	var listEvents=[];
	return{
		listEvents: listEvents,
		add: function(node,sEventName,fHandler,bCapture)
		{
			listEvents.push(arguments);
		},
		
		flush: function()
		{
			var i, item;
			for(i=listEvents.length-1;i>=0;i=i-1) 
			{	
				item=listEvents[i];
				if(!item) 
					continue;
				if(item[0].removeEventListener) 
					item[0].removeEventListener(item[1],item[2],item[3]);
				var logical_type='';
				if(item[1].substring(0,2)!="on") 
				{
					logical_type=item[1];
					item[1]="on"+item[1];
				}
				else 
					logical_type=item[1].substring(2,event_name_without_on.length);
				if(typeof item[0].__eventHandlers!='undefined'&&typeof item[0].__eventHandlers[logical_type]!='undefined') 
					item[0].__eventHandlers[logical_type]=null;
				if(item[0].detachEvent) 
					item[0].detachEvent(item[1],item[2]);
				item[0][item[1]]=null;
			};
			listEvents=null;
		}
	}
}();

function flashMsg(msg, width)
{
	var FLASH_MSG_ID = 'cs_flashMsg'; // id of html object that shows the msg
	if(!width)
		var width = 200;
	var div = document.createElement('div');
	div.id = FLASH_MSG_ID;
	div.style.width = width + 'px';
	div.style.marginLeft = (-width / 2) + 'px'; // minus half the width, to center on pg
	div.className = 'cs_flashMsg';
	div.innerHTML = msg;
	div.onclick = close; // let user close it; probably not needed, but safe
	document.body.appendChild(div);
	setTimeout(close, 2000); // kill msg after a while in case page isn't going to reload
	
	function close()
	{
		var div = document.getElementById(FLASH_MSG_ID);
		if(div)
			div.parentNode.removeChild(div);
	}
}

/* start functions used by lightbox */
function OnMouseDown(e)
{
	// IE is retarded and doesn't pass the event object
	if (e == null) 
		e = window.event; 
   if(typeof e.stopPropagation!='undefined')
      e.stopPropagation();
   else
      e.cancelBubble=true;		
	// IE uses srcElement, others use target
	var target = e.target != null ? e.target : e.srcElement;
	if (_debug)
		_debug.innerHTML = target.className == 'drag' 
		? 'draggable element clicked' 
		: 'NON-draggable element clicked';
	target = getDraggableTarget(target);
	// for IE, left click == 1
	// for Firefox, left click == 0
	if ((e.button == 1 && window.event != null || 
		e.button == 0) && target)
	{
		// grab the mouse position
		_startX = e.clientX;
		_startY = e.clientY;
		
		// grab the clicked element's position
		_offsetX = ExtractNumber(target.style.left);
		_offsetY = ExtractNumber(target.style.top);
		
		// bring the clicked element to the front while it is being dragged
		_oldZIndex = target.style.zIndex;
		target.style.zIndex = 10000;
		
		// we need to access the element in OnMouseMove
		_dragElement = target;

		// tell our code to start moving the element with the mouse
		document.onmousemove = OnMouseMove;
		
		// cancel out any text selections
		document.body.focus();
		
		// prevent text selection in IE
		document.onselectstart = function () { return false; };
		// prevent IE from trying to drag an image
		target.ondragstart = function() { return false; };
		
		// prevent text selection (except IE)
		return false;
	}
}

function OnMouseUp(e)
{
	if (_dragElement != null)
	{
		_dragElement.style.zIndex = _oldZIndex;

		// we're done with these events until the next OnMouseDown
		document.onmousemove = null;
		document.onselectstart = null;
		_dragElement.ondragstart = null;

		// this is how we know we're not dragging
		_dragElement = null;
		if (_debug)
			_debug.innerHTML = 'mouse up';
	}
}

function OnMouseMove(e)
{
	if (e == null) 
		var e = window.event; 
   if(typeof e.stopPropagation!='undefined')
      e.stopPropagation();
   else
      e.cancelBubble=true;				

	// this is the actual "drag code"
	_dragElement.style.left = (_offsetX + e.clientX - _startX) + 'px';
	_dragElement.style.top = (_offsetY + e.clientY - _startY) + 'px';
	if (_debug)
		_debug.innerHTML = '(' + _dragElement.style.left + ', ' + _dragElement.style.top + ')';	
}

function ExtractNumber(value)
{
	var n = parseInt(value);
	
	return n == null || isNaN(n) ? 0 : n;
}

function getDraggableTarget(obj)
{
	if (obj.className.indexOf('drag') >= 0)
		return obj;
	if (obj.offsetParent)
	{	
		while(obj=obj.offsetParent)
		{
			if (obj.className.indexOf('drag') >= 0)
				return obj;			
		}
	}
	return null;
}
/* END functions used by lightbox */

// this function is duplicated in browser-all.js and util.js; if you change one, change the other!
function BrowserCheck()
{
	var b = navigator.appName.toString();
	var b_ver;
	var up = navigator.platform.toString();
	var ua = navigator.userAgent.toString().toLowerCase();
	var re_opera = /Opera.([0-9\.]*)/i;
	var re_msie = /MSIE.([0-9\.]*)/i;
	var re_gecko = /gecko/i;
	// IE11 user-agent string ------ mozilla/5.0 (windows nt 6.1; wow64; trident/7.0; slcc2; .net clr 2.0.50727; rv:11.0) like gecko
	var re_msie_11 = /rv:([0-9\.]*)/i;
	// mozilla/5.0 (macintosh; u; intel mac os x 10_6_7; en-us) applewebkit/533.20.25 (khtml, like gecko) version/5.0.4 safari/533.20.27
	var re_safari = /safari\/([\d\.]*)/i;
	var re_mozilla = /firefox\/([\d\.]*)/i;
	var re_chrome = /chrome\/([\d\.]*)/i;
	var ie_documentMode = 0;
	var browserType = {};
	var ie11 = !!ua.match(/trident.*rv[ :]*11\./);
	browserType.mozilla = browserType.ie = browserType.opera = r = false;
	browserType.version = (ua.match(/.+(?:rv|it|ra|ie|me)[\/: ]([\d.]+)/) || [])[1];
	browserType.chrome = /chrome/.test(ua);
	browserType.safari = /webkit/.test(ua) && !/chrome/.test(ua);
	browserType.opera = /opera/.test(ua);
	browserType.ie = /msie/.test(ua) && !/opera/.test(ua);
	browserType.mozilla = /mozilla/.test(ua) && !/(compatible|webkit)/.test(ua) && !/trident/.test(ua);
	browserType.ie_documentMode = 0;
	if (ua.match(re_opera))
	{
	    r = ua.match(re_opera);
	    browserType.version = parseFloat(r[1]);
	}
	else if (ua.match(re_msie))
	{
	    r = ua.match(re_msie);
	    browserType.version = parseFloat(r[1]);
	    ie_documentMode = browserType.version;
	    if (browserType.version <= 7)
	    {
	        re_ver = /trident\/([\d\.]*)/i;
	        r = ua.match(re_ver);
	        // in IE compat mode, trident=4.0 (IE8), =5.0 (IE9), =6.0 (IE10) etc, i.e, version=trident+4.
	        if (r && parseFloat(r[1]) >= 4)
	        {
	            browserType.version = parseFloat(r[1]) + 4;
	            ie_documentMode = document.documentMode;
	        }
	    }
	}
	else if ((ua.match(re_msie_11) && /trident/.test(ua)) || ie11) // IE browser, version higher than 10
	{
		r = ua.match(re_msie_11);
		browserType.ie = true;
		browserType.mozilla = false;
		browserType.version = parseFloat(r[1]);
		ie_documentMode = browserType.version;
		re_ver = /trident\/([\d\.]*)/i;
		r = ua.match(re_ver);
		// in IE compat mode, trident=4.0 (IE8), =5.0 (IE9), =6.0 (IE10) etc, i.e, version=trident+4.
		if (r && parseFloat(r[1]) >= 4)
		{
		    browserType.version = parseFloat(r[1]) + 4;
		    ie_documentMode = document.documentMode;
		}
	}
	else if (browserType.safari && !browserType.chrome)
	{
	    re_ver = /version\/([\d\.]*)/i;
	    if (ua.match(re_ver))
	    {
	        r = ua.match(re_ver);
	        browserType.version = parseFloat(r[1]);
	    }
	}
	else if (browserType.chrome)
	{
	    b_ver = ua.match(re_chrome);
	    r = b_ver[1].split('.');
	    browserType.version = parseFloat(r[0]);
	}
	else if (ua.match(re_gecko))
	{
	    var re_gecko_version = /rv:\s*([0-9\.]+)/i;
	    r = ua.match(re_gecko_version);
	    browserType.version = parseFloat(r[1]);
	    if (ua.match(re_mozilla))
	    {
	        r = ua.match(re_mozilla);
	        browserType.version = parseFloat(r[1]);
	    }
	}
	else if (ua.match(re_mozilla))
	{
	    r = ua.match(re_mozilla);
	    browserType.version = parseFloat(r[1]);
	}
	browserType.windows = browserType.mac = browserType.linux = false;
	browserType.Platform = ua.match(/windows/i) ? "windows" : (ua.match(/linux/i) ? "linux" : (ua.match(/mac/i) ? "mac" : ua.match(/unix/i) ? "unix" : "unknown"));
	this[browserType.Platform] = true;
	browserType.v = browserType.version;
	browserType.valid = browserType.ie && browserType.v >= 6 || browserType.mozilla && browserType.v >= 1.4 || browserType.safari && browserType.v >= 5 || browserType.chrome && browserType.v >= 12;
	browserType.okToAuthor = (browserType.ie && browserType.v >= 8 && ie_documentMode >= 7) || browserType.mozilla && browserType.v >= 3.6 || browserType.safari && browserType.v >= 5 || browserType.chrome && browserType.v >= 12;
	browserType.ie_documentMode = ie_documentMode;
	if (browserType.safari && browserType.mac && browserType.mozilla) 
		browserType.mozilla=false;	
	return browserType;
};

// make sure we have our namespace
// must be called AFTER code to relocate if not in dashboard, if that's used
var commonspot = window.commonspot || parent.commonspot || {};

/**
 * commonspot.util: utility package
 */
if(typeof commonspot.util == 'undefined')
{
	commonspot.util = {};
	
	commonspot.util.browser = BrowserCheck();	

	commonspot.util.checkDashboard = function()
	{
		return (typeof(commonspot.lview) != 'undefined');
	}
	
	/**
	 * Encode string properly for html charactor
	 * @return string
	 */
	commonspot.util.encodeString = function(str)
	{	
		var regExp = /&amp;#39;|&amp;amp;|&amp;nbsp;|&lt;br \/&gt;&lt;br \/&gt;/;
		  	
		if (str && str.search(regExp) != -1)		
		{ 
			str = str.replace(/&amp;amp;/, '&amp;');
			str = str.replace(/&amp;#39;/, '&#39;');  
			str = str.replace(/&amp;nbsp;/, '&nbsp;'); 
			str = str.replace(/&lt;br \/&gt;&lt;br \/&gt;/, ' '); 		
		}  	
			 
		return str;
	};
		
	/**
	 * Escape special XML characters with the equivalent entities
	 * @return string
	 */
	commonspot.util.encodeXmlEntities = function(str)
	{
		if(str && str.search(/[&<>"]/) != -1)
		{
			str = str.replace(/&/g, '&amp;');
			str = str.replace(/</g, '&lt;');
			str = str.replace(/>/g, '&gt;');
			str = str.replace(/"/g, '&quot;');
		}
		// dmerrill 3/12/09: don't know why we do this, not xml spec
		return encodeURIComponent(str);
	};
		
	/**
	 * format a std commonspot date (yyyy-mm-dd hh:mm:ss) for display as a date only
	 * default format is yyyy-mm-dd
	 * if USFormat is true, returns it as mm/dd/yyyy
	 */
	commonspot.util.formatCSDate = function(csDateStr, USFormat)
	{
	   if(!csDateStr)
	      return;
		if(USFormat)
		{
			var aDateParts = csDateStr.split(/[- :]/);
			if(aDateParts.length < 3)
				throw("[formatCSDate(USFormat)] invalid date: " + csDateStr);
			return aDateParts[1] + "/" + aDateParts[2] + "/" + aDateParts[0];
		}
		return csDateStr.substr(0, 10);
	};
	
	/**
	 * for ea passed field in passed object, creates a new field w orig fld value converted to std date format
	 * @param row (object): object to process
	 * 		it's assumed to contain each of the fields in dateFieldsList, ea w date data
	 * @param dateFieldsList (string): comma-delimited list of fields to process
	 * @param fieldNameSuffix (string): appended to end of processed fld name to create name of formated fld
	 * 	if not passed, '_display' is used
	 * 	to overwrite orig fld w formatted version, pass ''
	 */
	commonspot.util.formatCSDateFields = function(obj, dateFieldsList, fieldNameSuffix)
	{
		if(!fieldNameSuffix)
			fieldNameSuffix = '_display';
		var aDateFlds = dateFieldsList.split(',');
		for(var i = 0; i < aDateFlds.length; i++)
			obj[aDateFlds[i] + fieldNameSuffix] = commonspot.util.formatCSDate(obj[aDateFlds[i]]);
	};
	
	
	/*
	 * @return object: returns an object with values from url hash, interpreted as query string format
	 */
	commonspot.util.getHashArgs = function()
	{
		var argStr = document.location.hash.replace(/^#+/, ''); // strip all leading #
		if (!argStr.toQueryParams)
			return null;
		var qstring = window.location.search;
		var qmPos = argStr.indexOf('?');
		var args;
		if (qmPos >= 0)
		{
			qstring = argStr.substr(qmPos);
			argStr = argStr.substr(0, qmPos);
			args = argStr.toQueryParams();
		}
		else
			args = argStr.toQueryParams();
		args.qstring = qstring;
		if (args.mode)
			args.mode = args.mode.toLowerCase();
		return args;
	};
	
	commonspot.util.getObjFieldLCase = function(obj, name)
	{
		if (name)
			return obj[name.toLowerCase()];
		else
			return null;
	};

	// return true if any item in permissionNeededList is in permissionList
	commonspot.util.hasAnyPermission = function(permissionNeededList, permissionList)
	{
		if( (!permissionNeededList) || (!permissionList) )
			return false;			
			
		aPermsNeeded = permissionNeededList.toLowerCase().split(',');
		aPermsYouHave = permissionList.toLowerCase().split(',');
		
		for(var i = 0; i < aPermsNeeded.length; i++)
		{
			if(aPermsYouHave.indexOf(aPermsNeeded[i]) != -1) 
				return true;
		}
		return false;
	};
		
	
	/*
	 * returns true if passed array or object has members
	 */
	commonspot.util.hasMembers = function(obj)
	{
		for(var f in obj)
		{
			try
			{
				if(obj.hasOwnProperty(f))
					return true;
			}
			catch(e)
			{
				return false;	
			}
		}
		return false;
	};
	
	/**
	 * Return boolean (true/false) as per the permission.
	 */	
	commonspot.util.hasPermission = function(permission, permissionList)
	{
		if( ! permissionList )
			return false;			
			
		permissionList = ',' + permissionList.toLowerCase() + ',';
		return (permissionList.indexOf(',' + permission.toLowerCase() + ',') != -1)
	};

	/*
	 * adds members of src to dest, returning dest
	 * overwrites existing members if overwrite is true
	 * ignores prototype members of either src or dest
	 * 	means it won't copy from src prototype, and it will overwrite dest prototype members
	 */
	commonspot.util.merge = function(dest, src, overwrite, lcaseDestField)
	{
		var destFld;
		for(var fld in src)
		{
			destFld = lcaseDestField ? fld.toLowerCase() : fld;
		   if(src.hasOwnProperty(fld) && (overwrite || (!dest.hasOwnProperty(destFld)) || dest[destFld] === null))
		      dest[destFld] = src[fld];
		}
		return dest;
	};
	
	/*
	 * pads passed value to a minimum of len chars; no effect if it's already that long or more
	 */
	commonspot.util.pad = function (val, len)
	{
		val = String(val);
		len = len || 2;
		while (val.length < len) val = "0" + val;
		return val;
	};
		
	/**
	 * commonspot.util.plural
	 * returns a string with passed count, a space, and count-appropriate form of noun
	 * @see \cs\devdocs\javascript-function-docs.js
	 */
	commonspot.util.plural = function(count, noun, specialPlural, specialZero)
	{
		switch(count)
		{
			case 0:
				return count + " " + (specialZero || specialPlural || (noun + "s"));
				break;
			case 1:
				return count + " " + noun;
				break;
			default:
				return count + " " + (specialPlural || (noun + "s"));
		}
	};
		
	commonspot.util.setOptions = function(dest, src)
	{
		for(var fld in src)
			dest[fld] = src[fld];
	};
							
	
	/*
	 * converts a date, or a string parsable as one, to commonspot's std yyyy-mm-dd hh:mm:ss format
	 * rtns commonspot.err.INVALID_DATE_TOKEN if not a valid date
	 */
	commonspot.util.toCSDateFormat = function(date)
	{
		date = new Date(date); // applies Date.parse if necessary
		if(isNaN(date))
			return commonspot.err.INVALID_DATE_TOKEN;
		return	date.getFullYear() + "-" +
					commonspot.util.pad((date.getMonth() + 1)) + "-" +
					commonspot.util.pad(date.getDay()) + " " +
					commonspot.util.pad(date.getHours()) + ":" +
					commonspot.util.pad(date.getMinutes()) + ":" +
					commonspot.util.pad(date.getSeconds());
	};

	/**
	 * Return true if a given object is an array
	 * @return boolean
	 * technique used in the next few functions is known as the Miller Device; see here:
	 * 	http://blog.360.yahoo.com/blog-TBPekxc1dLNy5DOloPfzVvFIVOWMB0li?p=916
	 * obj.constructor === Array and similar fails in multi-window/multi-frame environment
	 */
	commonspot.util.isArray = function(obj)
	{
		return obj && Object.prototype.toString.apply(obj) === "[object Array]";
	};
	commonspot.util.isDate = function(obj)
	{
		return obj && (Object.prototype.toString.apply(obj) === "[object Date]");
	}
	commonspot.util.isValidDate = function(obj)
	{
		return obj && commonspot.util.isDate(obj) && !(isNaN(obj));
	}
	commonspot.util.getObjectClass = function(obj)
	{
		var classStr = Object.prototype.toString.apply(obj); // "[object Array]", "[object String]", etc
		return classStr.substring(8, classStr.length - 1); // "Array", "String", etc
	};
	
	commonspot.util.arrayTest = function(_this, item, from)
	{
	   //return cs_utility.array.arrayIndexOf(_this,item,from)!=-1;
	   return _this.indexOf(item, from)!=-1;
	};
	
	/**
	 * given an array of objects and the name of a keyFld, returns an object...
	 * ...whose keys are the values in keyFld and whose values are the corresponding objects
	 * @param objArr (array): array of objects to examine
	 * @param keyFld (string): name of fld to look for in each object; values become keys in result object
	 */
	commonspot.util.objectArrayToObject = function(objArr, keyFld)
	{
		var i, keyValue;
		var obj = {};
		for(var i = 0; i < objArr.length; i++)
		{
			keyValue = objArr[i][keyFld];
			if(typeof keyValue != 'undefined')
				obj[keyValue] = objArr[i];
		}
		return obj;
	};
	
	/**
	 * returns a new object that's a by-value copy of passed one
	 * USAGE: foo = new commonspot.util.cloneObject(someObject);
	 */
	commonspot.util.cloneObject = function (obj)
	{
		for (i in obj)
			this[i] = obj[i];
	};
	
	/**
	 * Return a random integrer
	 * @return integer
	 */
	commonspot.util.generateRandomInt = function()
	{
		return Math.floor(Math.random() * 100000);
	};

	commonspot.util.getFileSizeHtml = function(fileSize)
	{
		if (fileSize < 1024)
			return fileSize + ' bytes';
			
		var value = fileSize % 1024;

		if (value > 0)
			return (fileSize / 1024).toFixed(2) + ' KB';
			
		return (fileSize / 1024) + ' KB';
	};
	
	commonspot.util.calcPreviewImgProp = function(origWidth, origHeight, maxWidth, maxHeight)
	{
		var isScaled = false;
		var newW = origWidth;
		var newH = origHeight;
				
		if ((origWidth >= maxWidth) || (origHeight >= maxHeight))
		{
			var ratioW = maxWidth / origWidth;
			var ratioH = maxHeight / origHeight;
			var ratio = Math.min(ratioW,ratioH);
	
			newW = Math.max(Math.round(origWidth * ratio), 1);		 
			newH = Math.max(Math.round(origHeight * ratio), 1);				
	
			isScaled = true;
		}		
	
		var imgProp = {width: newW,
							height: newH,
							isScaled: isScaled}
								
		return imgProp;
	};
	
	/*
	 * rtns html dump of passed obj
	 */
	commonspot.util.getDumpHTML = function(obj, caption)
	{
		var html = "";
		if(obj == undefined)
			html = "Object is undefined."
		else if(obj == null)
			html = "Object is null."
		else if(typeof obj == "function")
			html = "[function]";
		else if(typeof obj !== "object" || commonspot.util.isDate(obj))
			html = obj.toString().escapeHTML();
		else if(commonspot.util.isArray(obj))
		{
			var getDumpHTML = commonspot.util.getDumpHTML;
			var len = obj.length;
			html = '<table class="dumpTable">';
			if(caption)
				html += "<caption>" + caption +"</caption>";
			for(var i = 0; i < len; i++)
				html += "<tr><td>" + i + "</td><td>" + getDumpHTML(obj[i]) + "</td></tr>";
			html += "</table>";
		}
		else // object
		{
			var getDumpHTML = commonspot.util.getDumpHTML;
			html = '<table class="dumpTable">';
			if(caption)
				html += "<caption>" + caption +"</caption>";
			for(var key in obj)
				html += "<tr><td>" + key + "</td><td>" + getDumpHTML(obj[key]) + "</td></tr>";
			html += "</table>";
		}
		return html;
	};
	
	commonspot.util.repeatString = function(str, count)
	{
		var t = "";
		for(var i = 1; i <= count; i++)
			t += str;
		return t;
	};
	
	commonspot.util.jsSafe = function(str) // escape same chars as cf's JSStringFormat function
	{
		return str.replace(/(['"\\\b\t\n\f\r])/g, function(chr){return "\\" + commonspot.util.jsSafe.chars[chr.charCodeAt(0)];})
	};
	commonspot.util.jsSafe.chars = 
	{
	     8: "b",	// backspace
	     9: "t",	// tab
	    10: "n",	// newline
	    12: "f",	// formfeed
	    13: "r",	// carriage return
	    34: '"',	// dbl quote
	    39: "'",	// single quote
	    92: "\\"	// backslash
	};
	
	// returns str with tokens in the form {key} replaced by the value of data[key]
	// if key isn't found in data, returns original token
	// key can contain only alphanumeric characters and underscores
	commonspot.util.replaceTokens = function(str, data)
	{
		return str.replace
		(
			/{(\w+)}/g,
			function(fullMatch, key) // key is portion of match inside (), ie inside {} within str
			{
				return (typeof data[key] === "undefined") ? fullMatch : data[key];
			}
		);
	};
	
	/**
	 * commonspot.util.cookie: package for cookie-related utilities
	 */
	commonspot.util.cookie = {};
		
	commonspot.util.cookie.createCookie = function(name,value,days)
	{
		if(days)
		{
			var date = new Date();
			date.setTime(date.getTime() + (days*24*60*60*1000));
			var expires = "; expires=" + date.toGMTString();
		}
		else 
			var expires = "";
		document.cookie = name + "=" + value + expires + "; path=/";			
	};
	
	commonspot.util.cookie.readCookie = function(name)
	{
		var nameEQ = name + "=";
		var ca = document.cookie.split(';');
		for (var i=0; i < ca.length; i++)
		{
			var c = ca[i];
			while (c.charAt(0) == ' ')
			{
				c = c.substring(1,c.length);
			}
			if (c.indexOf(nameEQ) == 0)
			{
				return c.substring(nameEQ.length,c.length);
			}	
		}
		return null;
	};
	
	commonspot.util.cookie.eraseCookie = function(name)
	{
		commonspot.util.cookie.createCookie(name,"",-1);
	};
	
	/**
	 * commonspot.util.dom: package for dom-related utilities
	 */
	commonspot.util.dom = {};
	
	/*
	encapsulation of dom createElement
	objType, objID, objClass, objTitle, objHTML, objParent, objOnClick, objRefBefore, objRefAfter
	*/	
	commonspot.util.dom.addToDom = function(args)
	{
		var dom = document.createElement(args.objType);
		if (args.objID)
			dom.id = args.objID;
		if (args.objTitle)
			dom.title = args.objTitle;
		if (args.objClass)
			dom.className = args.objClass;
		if (args.objHTML)
			dom.innerHTML = args.objHTML;	
		if (args.objRefBefore)
			args.objParent.insertBefore(dom, args.objRefBefore);
		else if (args.objRefAfter){} // not implemented
		else		
			args.objParent.appendChild(dom);
		if (args.objOnClick)
			commonspot.util.event.addEvent(dom, "click", args.objOnClick);
		return dom;	
	}
	/**
	 * commonspot.util.dom.getWinScrollSize: returns actual content size of given window; 
	 * @param win (object): window object. if not supplied returns value for current window
	 * @return {width, height}
	 */	
	commonspot.util.dom.getWinScrollSize = function()
	{
		var sWidth=0, sHeight=0;
		var winSize = commonspot.util.dom.getWinSize();
		var win = self;
		if (win.document.body.clientHeight)
		{
			sHeight = win.document.body.clientHeight;
			sWidth = win.document.body.clientWidth;
		}	
		else if (win.document.height)
		{
			sHeight = win.document.height;
			sWidth = win.document.width;
		}
		return {width: Math.max(sWidth,winSize.width), height: Math.max(sHeight,winSize.height)};
	};
	
	/**
	 * commonspot.util.dom.getWinSize: returns inner size of current window; from PPK
	 * @return {width, height}
	 */
	commonspot.util.dom.getWinSize = function()
	{
		var width, height;
		if (self.innerHeight) // all except Explorer
		{
			width = self.innerWidth;
			height = self.innerHeight;
		}
		else if (document.documentElement && document.documentElement.clientHeight) // Explorer 6 Strict Mode
		{
			width = document.documentElement.clientWidth;
			height = document.documentElement.clientHeight;
		}
		else if (document.body) // other Explorers
		{
			width = document.body.clientWidth;
			height = document.body.clientHeight;
		}
		return {width: width, height: height};
	};
	
	/**
	 * removes all child nodes from passed obj
	 * needed because IE won't directly set innerHTML of some tags
	 * 
	 * @param obj (object): object to remove all children from
	 */
	commonspot.util.dom.removeAllChildren = function(obj)
	{
		while(obj.firstChild)
			obj.removeChild(obj.firstChild);
	};
	
	/**
	 * finds tag w requested name further up in dom hierarchy from passed obj
	 * 
	 * @param obj (dom node): object to find an ancestor of
	 * @param tagName (string): tag name to find
	 * 	not case sensitive
	 * 	won't find body or anything above there; those are singletons w simpler ways to find them
	 * @param level (int, optional): if passed, return level'th matching ancestor, not just first one
	 */
	commonspot.util.dom.getAncestorTag = function(obj, tagName, level)
	{
		if(!obj || !obj.parentNode)
			return null;
			
		tagName = tagName.toUpperCase();
		if(typeof level == 'undefined')
			level = 1;
		
		var tag = obj.parentNode;
		var curLevel = 0;
		
		while((tag.nodeName != tagName || curLevel < level) && tag.parentNode && tag.parentNode.nodeName != 'BODY')
		{
			tag = tag.parentNode;
			if(tag.nodeName == tagName)
				curLevel++;
		}
		
		if(tag.nodeName != tagName || curLevel < level)
			tag = null;
		return tag;
	};
	
	/**
	 * returns elements w passed className inside element w passed id.
	 * homegrown because Prototype 1.5's getElementsBySelector seems broken in IE7.
	 * @param id (string): id of element to look inside
	 * @param className (string): className to look for
	 * @param tagName (string, optional): if passed, looks only at tags w this name 
	 * @param getAll (boolean, optional): if true, return array of all found elements, otherwise, return first one
	 */
	commonspot.util.dom.getChildrenByClassName = function(id, className, tagName, getAll)
	{
		var results = [];
		var classMatchRegex = new RegExp("(^|\\s)" + className + "(\\s|$)");
		var tags = document.getElementById(id).getElementsByTagName(tagName || '*');
		for(var i = 0; i < tags.length; i++)
		{
			if(tags[i].className == className || tags[i].className.match(classMatchRegex))
			{
				if(getAll)
					results.push(tags[i]);
				else
					return tags[i];
			}
		}
		// if looking for single element and found none, rtn null; w/o this, rtns an empty array
		// when geAll=true we always rtn an array
		// when it's not, rtn a dom object, or something analogous to "no dom object", and tests false if you do if(domObj)
		if((!getAll) && (results.length === 0))
			return null;
		return results;
	};

	commonspot.util.dom.getElementsByClassName = function(searchClass,node,tag) 
	{
		if ( node == null )
			node = document;
		if ( tag == null )
			tag = '*';
		var classElements = new Array();
		try
		{
			classElements = node.getElementsByClassName(searchClass);
		}
		catch (e)
		{
			var els = node.getElementsByTagName(tag);
			var elsLen = els.length;
			var pattern = new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
			classElements = new Array();
			for (i = 0, j = 0; i < elsLen; i++) 
			{
				if ( pattern.test(els[i].className) ) 
				{
				        classElements[j] = els[i];
				        j++;
				}
			}
		}
		return classElements;
	};	
	
	/*
	* get all editable fields of the form
	*/
	commonspot.util.dom.findAllFields = function(iform,includeHidden) {	
		var arr = [];
		var elements = iform.elements;	
		var element;
		var omitList = 'button,submit,reset';
		var includeHidden = (typeof includeHidden != 'undefined') ? includeHidden : 1;
		if (includeHidden != 1)
			omitList += ',hidden';
		for (var i=0; i<elements.length; i++)
		{
			element = elements[i];
			// get rid of bad apples first
			if((omitList).indexOf(element.type)>=0)
				continue;
			if (element.disabled || element.readOnly)
				continue;
			arr.push(element);		
		}

		return arr;
	};

	/*
	* activate all editable fields of the form
	*/	
	commonspot.util.dom.activateAllFields = function(iform) {	
		var elements = commonspot.util.dom.findAllFields(iform);
		var curFld;

		for (var i=0; i< elements.length; i++)
		{
			try
			{
				curFld = eval(iform + '.' + elements[i]);
				if (curFld)
				{
					if (curFld.activate)
						curFld.activate();
					else
						curFld.focus();	
				}
			}
			catch (ex) {}	
		}
	};
	
	/*
	* Finds the first editable, non-disabled, non-hidden form field excluding buttons to set focus.
	* Takes a form as single argument. 
	* This is an enhanced version of prototype's "findFirstElement" function
	*/
	commonspot.util.dom.findFirstEditableField = function(iform) {
		var firstByIndex = null;

		var elements = commonspot.util.dom.findAllFields(iform);
		try
		{
			if (elements.findAll)
			{
				firstByIndex = elements.findAll(function(element) 
				{
				  return element.hasAttribute('tabIndex') && element.tabIndex >= 0;
				}).sortBy(function(element) { return element.tabIndex }).first();
			}
		}
		catch(e){}
		return firstByIndex ? firstByIndex : arr[0];
  	};
		
	/**
	 * commonspot.util.css: package for event-related utilities 
	 * we only need this addEvent function so adding it here instead of importing event package of prototype
	 */	

	
	commonspot.util.event = {};
	
	/**
	*	Irons out the IE and FF differences. Ideally we should use W3C model addEventListener,
	*	ie, when IE agrees with it
	*/
	commonspot.util.event.addEvent = function( dObj, type, fn ) 
	{
		if (dObj.addEventListener) 
		{
			dObj.addEventListener( type, fn, false );
			//EventCache.add(dObj, type, fn, 1);
		}
		else if (dObj.attachEvent) 
		{
			dObj["e"+type+fn] = fn;
			dObj[type+fn] = function() 
			{ 
				dObj["e"+type+fn]( window.event ); 
			}
			dObj.attachEvent( "on"+type, dObj[type+fn] );
			EventCache.add(dObj, type, fn, 1);
		}
		else 
		{
			dObj["on"+type] = dObj["e"+type+fn];
		}
	};
	
	/**
	 * commonspot.util.css: package for css-related utilities
	 */
	commonspot.util.css = {};

	commonspot.util.css.addRemoveClassNameByIDs = function(objIDsList, className, add, contextWindow)
	{
		contextWindow = contextWindow || top.commonspot.lightbox.getCurrentWindow();
		var objIDs = objIDsList.split(",");
		var objs = contextWindow.$.apply(contextWindow, objIDs);
		if(objs)
		{
			if(objs.nodeName) // single element
				objs = [objs];
			objs.each(function(elem, index)
			{
				if(!elem)
					throw new Error("[addRemoveClassNameByIDs] Element with ID '" + objIDs[index] + "' can't be found.");
				else if(add)
					elem.addClassName(className);
				else
					elem.removeClassName(className);
			});
		}
		else // oops, bad objIDsList
			throw new Error("[addRemoveClassNameByIDs] Unable to find objects with the following IDs: " + objIDsList);
	};
		
		
	/**
	 * commonspot.util.css.showHideCSSClass: shows or hides a css class
	 */
	commonspot.util.css.showHideCSSClass = function(show, stylesheetID, targetClass)
	{
		var display = show ? '' : 'none';
		commonspot.util.css.setStyleRuleProperty(stylesheetID, targetClass, 'display', display);
	};
	
	/**
	*
	*/
	commonspot.util.css.setHideForMenusForAllFrames = function(stylesheetID, targetClass, propertyName, value, win)
	{
		var cWin;
		var win = win ? win : window;
		var arrayWindows = [];
		var iFrames = win.document.getElementsByTagName('iframe');
		for (var i =0; i<iFrames.length; i++)
		{
			cWin = iFrames[i].contentWindow;
			try
			{
				if (cWin && cWin.document)
					arrayWindows[i] = cWin;
			}
			catch(e){};		
		}
		
		if (win.document)
			arrayWindows[iFrames.length] = win;
		for (i=0; i<arrayWindows.length; i++)
		{	
			commonspot.util.css.setStyleRuleProperty(stylesheetID, targetClass, propertyName, value, arrayWindows[i]);
		}	
	};	
	
	

	
	/**
	 * commonspot.util.css.setStyleRuleProperty: sets a requested property of a stylesheet class
	 */
	commonspot.util.css.setStyleRuleProperty = function(stylesheetID, targetClass, propertyName, value, win)
	{	
	 	// note that propertyNames need to use their js-style names, ie, 'whiteSpace', not 'white-space'
		var cssRules, ruleIndex;
		var doc = win ? win.document : document;
		var ss = doc.getElementById(stylesheetID);
		if(!ss)
			return;
		if(!ss.sheet) // IE
		{
			ss = doc.styleSheets[stylesheetID];
			cssRules = doc.styleSheets[stylesheetID].rules;
		}
		else // Firefox
		{
			cssRules = ss.sheet.cssRules;
		}
		ruleIndex = getCSSRuleIndex(cssRules, '.' + targetClass);
		if(ruleIndex != null)
		{
			cssRules[ruleIndex].style[propertyName] = value;
		}
		return;
	
		function getCSSRuleIndex(cssRules, selectorText)
		{
			for(var i = 0; i < cssRules.length; i++)
			{
				if(cssRules[i].selectorText == selectorText)
				{
					return i;
				}
			}
			return null;
		}
	};
	
	commonspot.util.css.hideForMenus = function(hide) 
	{
		var prop=hide ? 'hidden' : 'visible';
		commonspot.util.css.setStyleRuleProperty('cs_maincss','cpHideForMenus','visibility',prop);
		commonspot.util.css.setStyleRuleProperty('cs_maincss','cpMenuSafe','visibility',prop);
	};
	
	/*
	 * shows or hides any number of passed elements, passed as objects or as IDs
	 * elements argument can be:
	 * 	- an elementID string, comma delimited for multiple
	 * 	- an object containing html elements or strings
	 *		- an array containing html elements or string elementIDs
	 * note:
	 * 	showHideElements works by modifying inline style
	 * 	showHideElementsUsingCSSClass does the same thing by adding or removing a css class; 
	 * 		it's a better choice for table rows
	 * 	copies of these functions in util.js work on objects in the top frame, regardless of where they're called from
	 * 	copies of them in nondashboard-util.js work on local window
	 */
	commonspot.util.css.showHideElements = function(show, elements, dspType)
	{
   	if (!dspType) 
   		dspType = 'block';
   	var display = show ? dspType : 'none';
   	var targets;
   	if (typeof elements == 'string') 
   		targets = elements.split(',');
   	else 
   		targets = elements;
	   targets.each(function(elem)
		{
			$(elem).style.display = display;
		});
	};
	
	// see comments above for showHideElements
	commonspot.util.css.showHideElementsUsingCSSClass = function(show, elements)
	{
		var targets = (typeof elements == 'string') ? elements.split(',') : elements;
		if(typeof targets !== "array")
		{
			targets.each(function(elem)
			{
				if(show)
					$(elem).removeClassName('showHideElements_hide');
				else
					$(elem).addClassName('showHideElements_hide');
			});
		}
	};

	
	/*
	 * disables any number of passed elements, passed as objects or as IDs
	 * 	does visual change w css class 'disabled'; set that up to look right for the look of each kind of item 
	 *		does actual disabling by stashing item's onclick in onclickDisabled custom property, nulling onclick
	 *		also sets item's disabled property
	 *			if neither of those to methods applies (disabled parent item etc), code will need to check some other way
	 */
	commonspot.util.css.enableDisableElements = function(enable, elements)
	{
		if(enable)
			elements.each(function(elem)
				{
					elem.removeClassName('disabled');
					elem.onclick = elem.onclickDisabled ? elem.onclickDisabled : elem.onclick;
	            elem.onmouseover = elem.onmouseoverDisabled ? elem.onmouseoverDisabled : elem.onmouseover;
					elem.disabled = false;
				});
		else
			elements.each(function(elem)
				{
					elem.addClassName('disabled');
					elem.onclickDisabled = elem.onclick ? elem.onclick : elem.onclickDisabled;
	            elem.onmouseoverDisabled = elem.onmouseover ? elem.onmouseover : elem.onmouseoverDisabled;
					elem.onclick = null;
	            elem.onmouseover = null;
					elem.disabled = true;
				});
	};
	
	
	commonspot.util.css.showFromMenuFields = function(visibleMenuClassList, fieldsList, dspType)
	{
	   if(!dspType)
	      dspType = 'block';
		var fld, show, selector;
		var aFields = fieldsList.split(',');
	   var aData = visibleMenuClassList.split(',');
	
		for(var i = 0; i < aFields.length; i++)
		{
			fld = aFields[i];
	      
	      show = commonspot.util.arrayTest(aData,fld,0) ? 1 : 0;
			
			selector = '.cs_' + fld + '_hide';
			commonspot.util.css.showHideElements(show, $$(selector), dspType)
		} 
	};
	
	commonspot.util.css.enableFromMenuFields = function(enabledMenuClassList, fieldsList, dspType)
	{
	   if(!dspType)
	      dspType = 'block';
		var fld, enable, selector;
		var aFields = fieldsList.split(',');
	   var aData = enabledMenuClassList.split(',');
	
		for(var i = 0; i < aFields.length; i++)
		{
			fld = aFields[i];
	      
	      enable = commonspot.util.arrayTest(aData,fld,0) ? 1 : 0;
			
			selector = '.cs_' + fld + '_disable';
			commonspot.util.css.enableDisableElements(enable, $$(selector))
		} 
	};
	
	/**
	 * display effects package
	 */
	commonspot.util.effects = {};
	
	/**
	 * commonspot.util.effects.blindLeft: like scriptaculous BlindUp, but to left
	 */
	commonspot.util.effects.blindLeft = function(element) {
	  element = $(element);
	  element.makeClipping();
	  return new Effect.Scale(element, 0,
	    Object.extend({ scaleContent: false, 
	      scaleX: true,
	      scaleY: false,
	      restoreAfterFinish: true,
	      afterFinishInternal: function(effect) {
	        effect.element.hide().undoClipping();
	      } 
	    }, arguments[1] || {})
	  );
	};
	
	/**
	 * commonspot.util.effects.blindRight: like scriptaculous BlindDown, but from left
	 */
	commonspot.util.effects.blindRight = function(element) {
	  element = $(element);
	  var elementDimensions = element.getDimensions();
	  return new Effect.Scale(element, 100, Object.extend({ 
	    scaleContent: false, 
	    scaleX: true,
	    scaleY: false,
	    scaleFrom: 0,
	    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},
	    restoreAfterFinish: true,
	    afterSetup: function(effect) {
	      effect.element.makeClipping().setStyle({width: '0px'}).show(); 
	    },  
	    afterFinishInternal: function(effect) {
	      effect.element.undoClipping();
	    }
	  }, arguments[1] || {}));
	};
	
	
	/**
	 * commonspot.util.menus: package for operating menus
	 */
	commonspot.util.menus = {};
	
	/*
	 * checks or unchecks passed menu item
	 * requires css class 'checked', with check image as background
	 * item should have class 'checkableMenuItem' applied always, for correct spacing
	 */
	commonspot.util.menus.checkItem = function(checked, item)
	{
		var element = $(item);
		if(!element)
			{}
		else if(checked)
			element.addClassName('checkedMenuItem');
		else
			element.removeClassName('checkedMenuItem');
	};
	

	
	/**
	 * change StyleRule.
	 * Currently the property is hardcoded for display:block.
	 * We have to make it dynamic . so that it can set any property.
	 */ 
	commonspot.util.css.changeStyleRule = function(document, sheetTitle, className, propertyName, value)
	{
		var rules = commonspot.util.css.getStyleSheetByTitle(document, sheetTitle).rules; 
		
		for (i=0; i< rules.length; i++)
		{      
			if (rules[i].selectorText.toLowerCase() == className.toLowerCase())
			{ 	
				rules[i].style.display = value; 
				break; 
			} 
		}  
	};
	 
	/**
	 * Get Stylesheet By Title.
	 */ 
	commonspot.util.css.getStyleSheetByTitle = function(doc, sheetTitle)
	{ 	
		var sheet = null;
		var rules = null;
		var thisTitle = null;
		
		if (doc.styleSheets.length > 0)
		{
			for (i = 0; i< doc.styleSheets.length; i++)
			{
				thisTitle = doc.styleSheets[i].title ? doc.styleSheets[i].title : null;
				if ( thisTitle && thisTitle.toLowerCase()  == sheetTitle)
				{
					sheet = doc.styleSheets[i];
					rules = sheet.cssRules? sheet.cssRules: sheet.rules;
					break; 
				}			 
			}  	
		}
		
		return {sheet: sheet, rules: rules};
	};

	
	/*
	 * xml utilities
	 */
	commonspot.util.xml = {};
	
	/**
	 * Serialize object's properties into XML tags
	 * @param obj (any type ex function I think) required
	 * @param nodeName (string) optional
	 * 	if not passed, defaults to 'struct' for structs, and 'array' for arrays
	 * 	for other types, no root node is rendered unless nodeName is passed, in which case it's used
	 * array containers have a 'class="array"' attribute to tell the server side that it's an array
	 * empty structs have a 'class="struct"' attribute for the same reason
	 * array item nodes are always <item> tags
	 * array example:
	 * 	<foo class="array"><item>hello</item><item>world</item></foo>
	 * @return an XML string
	 */
	 /*
		test code:
var UNDEFINED;
tests =
[
	"asdf & <qwer>",
	new Date(),
	new Date("not a valid date"),
	{a:1,b:2},
	{a:1,b:2,c:{aa:11,bb:22,cc:{aaa:111,bbb:222}}},
	[1,2],
	[1,2,"asdf & <qwer>",{aa:11,bb:22}],
	[1,2,[33,44,[555,666]]],
	{a:1,b:2,c:[33,44,[555,666,{aa:77,bb:88,cc:[1,2]}]]},
	{a:1,b:'foo',c:'',d:[],e:{}},
	["one element array"],
	{a:1,b:2,c:["one element array"]},
	function(){},
	{a:1,b:2,c:function(){}},
	UNDEFINED,
	null,
	{lastName: UNDEFINED, firstName: null, birthday: new Date('not a valid date')}
];
for(var i = 0; i < tests.length; i++)
{
	console.log(i, "TEST OBJ:", tests[i]);
	console.log(i, commonspot.util.xml.objectToXml(tests[i]));
	console.log(i, commonspot.util.xml.objectToXml(tests[i], "data"));
}
commonspot.util.xml.objectToXml(x);
	 */
	
	commonspot.util.xml.objectToXml = function(obj, nodeName)
	{
		var xml = '';
		var _nodeName = nodeName;
		
		var type = typeof obj;
		if(obj === undefined)
			type = 'undefined';
		else if(obj == null)
			type = 'null';
		else if(type !== 'object')
			{}
		else if(commonspot.util.isArray(obj))
			type = 'array';
		else if(commonspot.util.isDate(obj))
			type = 'date';

		switch (type)
		{
			case 'number':
			case 'boolean':
				xml = obj;
				break;
				
			case 'string':
				xml = commonspot.util.xml.encodeEntities(obj);
				break;
			
			case 'date':
				if(isNaN(obj))
				{
					xml = commonspot.err.INVALID_DATE_TOKEN;
					nodeClass = 'exception';
				}
				else
				{
					xml = commonspot.util.toCSDateFormat(obj);
					if(xml === commonspot.err.INVALID_DATE_TOKEN)
						nodeClass = 'exception';
				}
				break;
			
			case 'array':
				_nodeName = _nodeName ? _nodeName : 'array';
				var nodeClass = 'array';
				var objectToXml = commonspot.util.xml.objectToXml; // local, will bang on it
				var len = obj.length;
				for(var i = 0; i < len; i++)
					xml += objectToXml(obj[i], 'item');
				break;
				
			case 'object':
				_nodeName = _nodeName ? _nodeName : 'struct';
				nodeClass = 'struct';
				var objectToXml = commonspot.util.xml.objectToXml; // local, will bang on it
				for(var key in obj)
				{
					xml += objectToXml(obj[key], key);
					nodeClass = ''; // dont' need to put a class on it if it has children
				}
				break;
			
			case 'null':
				xml = commonspot.err.NULL_VALUE_TOKEN;
				nodeClass = 'exception';
				break;
			
			case 'undefined':
				xml = commonspot.err.UNDEFINED_VALUE_TOKEN;
				nodeClass = 'exception';
				break;
				
			default:
				xml = commonspot.err.UNSUPPORTED_TYPE_TOKEN.replace('</', ': ' + typeof obj + '</');
				nodeClass = 'exception';
		}

		if(_nodeName)
			xml = '<' + _nodeName + (nodeClass ? ' class="' + nodeClass + '"' : '') + '>' + xml + '</' + _nodeName + '>';
		return xml;
	};
	
	/**
	 * returns a javascript object analguous to a passed xml node
	 * @param node (xml node): node to process
	 * @param skip (string || object):
	 * 	can be a comma delimited list of dot-path items to omit, ie, "item.data,item.status.data.cmd"
	 * 		no extra whitespace!!!
	 * 	can also be a struct w those dot-path items as keys and any value that evals as true in a boolean test
	 * 	NOT xpath etc, ie, no wildcards, just simple exact match to passed skip paths
	 * 	this is recursive, and passed string gets converted to a more efficient struct, which then gets passed on
	 * @param path (string || null):
	 * 	DO NOT PASS THIS. calls itself recursively, passing this internally to support @param skip
	 * @return (object): js object representing pass xml node
	 * 
	 * somewhat specialized for commonspot use
	 * 	doesn't create or examine attributes, with one exception:
	 * 	attribute 'class' is used to know if a container is an array, but not applied to result
	 */
	/* test code
xml = '<s><a>1</a><b>2</b><c class="array"><item>11</item><item>22 &quot; &apos; &lt; &gt; &amp; &amp;amp; &amp;amp;amp;</item><item></item><item class="array"></item><item class="struct"></item></c></s>';
xmlDoc = tmt.xml.stringToDOM(xml);
commonspot.util.xml.nodeToObject(xmlDoc);
*/
	
	commonspot.util.xml.nodeToObject = function(node, skip, path)
	{
		if(!node)
			return null;
			
		if(!skip)
			skip = {};
		else if(typeof skip === "string")
		{	// passed value is a string, convert to struct for efficient existance testing
			var aSkip = skip.split(",");
			skip = {};
			for(var i = 0; i < aSkip.length; i++)
			   skip[aSkip[i]] = true;
		}
		
		// if no path, make it "", and if it's not "", put a "." on end
		path = path || "";
		path = (path === "") ? path : (path + ".");
	
		var obj = {};
		var child, typeClass, isArray, isStruct, hasChildNodes, tagName, childObj, childPath, nodeAtrs, dataType, csItemKey;
	
		nodeAtrs = commonspot.util.xml.getNodeAttributes(node);
		if(commonspot.util.xml.nodeHasValue(node)) // node has a value, use it
		{
			dataType = (nodeAtrs && nodeAtrs["type"]) ? nodeAtrs["type"].toLowerCase() : null; // we honor 'type' attribute
			try
			{
				child = node.firstChild;
				switch(child.nodeType)
				{
					case 3: // TEXT_NODE
					case 4: // CDATA_SECTION_NODE
						obj = child.data;
						if(dataType === "bool")
							obj = obj.toBoolean();
						else if(dataType === "int")
						{
							obj = parseInt(obj);
							obj = isNaN(obj) ? 0 : obj;
						}
						/* dmerrill 9/4/09: works, not used, yet, maybe never
						else if(dataType === "float")
						{
							obj = parseFloat(obj);
							obj = isNaN(obj) ? 0 : obj;
						}*/
						else if(child.nodeType == 3) // TEXT_NODE
							obj = commonspot.util.xml.encodeEntities(obj);
						break;
				}
			} catch (e) { alert("commonspot.util.xml.nodeToObject() exception caught: " + e); }
		}
		else // no value
		{
			hasChildNodes = (node.childNodes && node.childNodes.length > 0);
			isArray = isStruct = false;
			if(nodeAtrs)
			{
				isArray = (nodeAtrs["class"] === "array");
				isStruct = (nodeAtrs["class"] === "struct");
			}
			if(!(isArray || isStruct))
				isStruct = hasChildNodes; // it's a struct if it isn't an array and has child nodes
			obj = isArray ? [] : isStruct ? {} : "";
			
			if(!hasChildNodes) // no value, no children
				return obj;
			
			child = node.firstChild;
			while(child)
			{
				tagName = child.nodeName;
				if(tagName === 'cs_item')
				{
					csItemKey = commonspot.util.xml.getNodeAttribute(child, 'key');
					tagName = csItemKey || tagName;
				}
				childPath = path + tagName;
				if(child.nodeType == 1 && !skip[childPath]) // Node.ELEMENT_NODE and not skipped path
				{
					childObj = commonspot.util.xml.nodeToObject(child, skip, childPath);
					if(isArray)
						obj.push(childObj);
					else
						obj[tagName] = childObj;
				}
				child = child.nextSibling;
			}
		}
		return obj;
	};
	
	commonspot.util.xml.getNodeAttribute = function(node, attributeName)
	{
		if((!node.attributes) || node.attributes.length === 0)
			return null;
		attributeName = attributeName ? attributeName.toLowerCase() : null;
		for(var i = 0; i < node.attributes.length; i++)
		{
			if(node.attributes[i].name && (node.attributes[i].name.toLowerCase() == attributeName))
				return node.attributes[i].value;
		}
		return null;
	};
	
	commonspot.util.xml.getNodeAttributes = function(node)
	{
		if((!node.attributes) || node.attributes.length === 0)
			return null;
		var atrs = node.attributes;
		var result = {};
		for(var i = 0; i < atrs.length; i++)
		{
			if (atrs[i].name)
				result[atrs[i].name.toLowerCase()] = atrs[i].value;
		}	
		return result;
	};
		
	commonspot.util.xml.nodeHasValue = function(node)
	{
		if (node)
		{
			var child = node.firstChild;
			// 3 = Node.TEXT_NODE, 4 = CDATA_SECTION_NODE
			if (child && child.nextSibling == null && (child.nodeType == 3 || child.nodeType == 4))
				return true;
		}
		return false;
	};
	
	/**
	 * Unescapes special chars that the commonspot serializer escapes
	 * @return string
	 */
	commonspot.util.xml.decodeEntities = function(str)
	{
		if(str && (str.length >= 4) && str.search(/&lt;|&gt;|&quot;|&amp;/) != -1)
		{
			str = str.replace(/&lt;/gi, '<');
			str = str.replace(/&gt;/gi, '>');
			str = str.replace(/&quot;/gi, '"');
			str = str.replace(/&amp;/gi, '&');
		}
		return str;
	};
	
	commonspot.util.xml.encodeEntities = function(str)
	{
		if (str && str.search(/[&<>"]/) != -1)
		{
			str = str.replace(/&/g, '&amp;');
			str = str.replace(/</g, '&lt;');
			str = str.replace(/>/g, '&gt;');
			str = str.replace(/"/g, '&quot;');
		}
		return str;
	};
	
} // End: commonspot.util



/*
 * Error managment tools
 */
if(!commonspot.err) // commonspot.err not built yet
{
	// NAMESPACE
	commonspot.err = {};
	
	// CONSTANTS
	commonspot.err.COMMAND_REFUSAL_ERROR_CODE = 409;
	commonspot.err.AUTHORING_DISABLED_ERROR_CODE = 503;
	commonspot.err.INTERNAL_ERROR_CODE = 560;
	
	commonspot.err.INCOMPLETE_RETURN_VALUE_EXCEPTION = 'CSIncompleteReturnValueException';
	
	commonspot.err.HTTP_ERROR_MSG = 'Failed to get command response, server reported a communication error.';
	commonspot.err.FATAL_COMMAND_COLLECTION_ERROR_MSG = 'We\'re sorry, an error has occurred.';
	commonspot.err.EMPTY_COLLECTION_MSG = 'The command collection is empty and cannot be sent.';
	commonspot.err.EMPTY_RESPONSE_MSG = 'The server response is empty and cannot be processed.';
	commonspot.err.COMMAND_HANDLER_ERROR_MSG_START = 'JavaScript error in command response handler.';
	commonspot.err.UNMAPPED_FIELD_ERROR_MSG_START = '';
	commonspot.err.MISSING_DATASET_ERROR_MSG = 'Unable to locate dataset';
	commonspot.err.REQUIRED_MSG = "This field is required.";
	
	commonspot.err.MAPPED_FIELD_ERROR_MSGS_HEADER = 'Please correct the following:';
	commonspot.err.INTERNAL_ERROR_MSGS_HEADER = 'We\'re sorry, an internal error has occurred.';
	
	commonspot.err.FIELD_ERROR_CSS_CLASS = 'CommonSpotFieldError';
	commonspot.err.INVALID_VALUE_PREFIX = "{!INVALID_VALUE_PREFIX!}";
	
	commonspot.err.NULL_VALUE_TOKEN = '<message>Attempt to pass a null value.</message>';
	commonspot.err.UNDEFINED_VALUE_TOKEN = '<message>Attempt to pass an undefined value.</message>';
	commonspot.err.UNSUPPORTED_TYPE_TOKEN = '<message>Attempt to pass an unsupported type.</message>';
	commonspot.err.INVALID_DATE_TOKEN = '<message>Attempt to pass an invalid date.</message>';
	
	// STATIC METHODS
	
	/*
	 * rtns passed msg w INVALID_VALUE_PREFIX prepended
	 * point is that it's recognized by ErrorCollection.checkFieldValue as an invalid value
	 * for an example, see /dashboard/dialogs/tools/js/advanced-search.js:
	 * 	getOwner() rtns a msg built w commonspot.err.invalidMsg() if it's invalid
	 * 	collectFormArgs() creates a new commonspot.err.ErrorCollection
	 * 		then checks each collected value with the collection's checkFieldValue() method
	 * 		it then calls the collection's displayErrors() method to show them, and bails if that rtns true (were rrs)
	 */
	commonspot.err.invalidMsg = function(msg)
	{
		return commonspot.err.INVALID_VALUE_PREFIX + msg;
	};
		
	/*
	 * clears field error styling off all fields that might get it if they fail
	 * relevant fields are ones whose highlightIDs are in passed fieldErrorMap or are values in errorCodeMap
	 * always operates on topmost lightbox window, regardless of where it's called from
	 */
	commonspot.err.clearFieldErrorDisplay = function(fieldErrorMap, errorCodeMap, fieldErrorContext)
	{
		var contextWindow = commonspot.err.getFieldErrorContextWindow(fieldErrorContext);
		var highlightIDs;
		for(var fld in fieldErrorMap)
		{
			highlightIDs = fieldErrorMap[fld].highlightIDs;
			if(highlightIDs)
				commonspot.util.css.addRemoveClassNameByIDs(highlightIDs, commonspot.err.FIELD_ERROR_CSS_CLASS, false, contextWindow);
		}
		for(var code in errorCodeMap)
		{
			highlightIDs = errorCodeMap[code].highlightIDs;
			if(highlightIDs) // should exist, friendlyName and highlightIDs are reason for map to exist
				commonspot.util.css.addRemoveClassNameByIDs(highlightIDs, commonspot.err.FIELD_ERROR_CSS_CLASS, false, contextWindow);
		}
	};
	
	commonspot.err.getFieldErrorContextWindow = function(fieldErrorContext)
	{
		var contextWindow;
		switch(fieldErrorContext) // may need more cases in here some day
		{
			case 'admin':
				contextWindow = commonspot.lightbox.getAdminWindow();
				break;
			default:
				contextWindow = top.commonspot.lightbox.getCurrentWindow();
		}
				
		return contextWindow;
	};
	
	// CLASSES
	
	/*
	 * ErrorCollection class, holds and displays error objects
	 */
	commonspot.err.ErrorCollection = function ()
	{
		this.errors = [];
		return this;
	};
	
	/*
	 * adds passed errorObject to this collection
	 * object must support render() method
	 * 	TODO: explain that more
	 */
	commonspot.err.ErrorCollection.prototype.addError = function(errorObject)
	{
		this.errors.push(errorObject);
	};
	
	/**
	 * checks passed value, if it starts w INVALID_PREFIX, it's an error, and rest of it is error msg
	 * 	so, add corresponding FieldError object to this ErrorCollection, and rtn true
	 * otherwise, it's not an error, clear its error appearance, and rtn false
	 * can also validate the value here, but mostly we validate on the server side, so in general, don't
	 * 
	 * @param value (any) required: value to check
	 * @param friendlyName (string) optional: name to call it in user alerts
	 * @param highlightID (string) optional: id of dom element to hilight if invalid
	 * @param validator (string or function) optional:
	 * 	if passed, it's used to process the value first
	 * 	can be the name of a std validator, in commonspot.err.validators namespace...
	 * 		...or a reference to (not the name of) a custom function 
	 * 	validator functions should return passed value if it's valid, else commonspot.err.invalidMsg("Some message")
	 */
	commonspot.err.ErrorCollection.prototype.checkFieldValue = function(value, friendlyName, highlightID, validator)
	{
		if(typeof validator === "string")
			validator = commonspot.err.validators[validator];
		if(typeof validator === "function")
			value = validator(value);
			
		var lightboxWindow = top.commonspot.lightbox.getCurrentWindow();
		if((typeof value === "string") && (value.substr(0, commonspot.err.INVALID_VALUE_PREFIX.length) == commonspot.err.INVALID_VALUE_PREFIX))
		{
			if(highlightID && highlightID != "")
				lightboxWindow.$(highlightID).addClassName(commonspot.err.FIELD_ERROR_CSS_CLASS);
			var msg = value.substr(commonspot.err.INVALID_VALUE_PREFIX.length);
			var fieldError = new commonspot.err.FieldError(msg, friendlyName, highlightID);
			this.addError(fieldError);
			return true;
		}
		else if(highlightID && highlightID != "")
		{
			lightboxWindow.$(highlightID).removeClassName(commonspot.err.FIELD_ERROR_CSS_CLASS);
			return false;
		}
	};
	
	/*
	 * if collection contains errors, displays them and rtns true, else rtns false
	 * TODO: explain more about responsibilities of objects in its error collection, and how instances of them get created
	 */
	commonspot.err.ErrorCollection.prototype.displayErrors = function(fieldErrorContext)
	{
		if(this.errors.length > 0)
		{
			var contextWindow = fieldErrorContext
					? commonspot.err.getFieldErrorContextWindow(fieldErrorContext)
					: top.commonspot.lightbox.getCurrentWindow();
			var fieldMsgs = "";
			var userMsgs = "";
			var internalMsgs = "";
			var msgs;
			for(var i = 0; i < this.errors.length; i++)
			{
				msgs = this.errors[i].render(contextWindow);
				if(msgs.field && msgs.field !== "")
					fieldMsgs += msgs.field;
				if(msgs.user && msgs.user !== "")
					userMsgs += msgs.user;
				if(msgs.internal && msgs.internal !== "")
					internalMsgs += msgs.internal;
			}
			var msg = "";
			if(userMsgs !== "")
				msg += userMsgs;
			if(fieldMsgs !== "")
				msg += "<h2>" + commonspot.err.MAPPED_FIELD_ERROR_MSGS_HEADER + "</h2><dl>" + fieldMsgs + "</dl>";
			if(internalMsgs !== "")
				msg += "<h2>" + commonspot.err.INTERNAL_ERROR_MSGS_HEADER + "</h2><dl>" + internalMsgs + "</dl>";
			commonspot.dialog.client.alert(msg);
		}
		return (this.errors.length > 0); // boolean == hasErrors
	};
	
	
	/*
	 * Helper function.  Checks if the passed value is empty. If so sets an invalidMsg and checks the field Value
	 */
	commonspot.err.ErrorCollection.prototype.setErrorIfEmpty = function(value, friendlyName, highlightID, msg)
	{
		if(value == "")
		{
			if(typeof(msg) == "undefined")
				msg = commonspot.err.REQUIRED_MSG;
			value = commonspot.err.invalidMsg(msg);
			this.checkFieldValue(value, friendlyName, highlightID);		
		}	
	};
	
	/*
	 * CmdError class, represents a server-side error running a cmd
	 * TODO: write this, document fieldErrors and fieldErrorMap members better
	 * fieldErrors
	 * 	errortype:
	 * 	message:
	 * 	fieldtype:
	 * 	passedtype:
	 * fieldErrorMap
	 * 	struct, keyed by the lcase argument name on the server side.
	 * 	for each field, value is a struct containing...
	 * 		friendlyName:
	 * 		highlightIDs:
	 * 		position:
	 */
	commonspot.err.CmdError = function(responseStatus, fieldErrorMap, errorCodeMap)
	{
		this.cmd = responseStatus.cmd;
		this.code = responseStatus.code;
		this.reasonCode = responseStatus.reasoncode;
		this.text = responseStatus.text;
		this.hasFieldErrors = responseStatus.hasFieldErrors;
		if(responseStatus.data)
		{
			this.exceptionType = responseStatus.data.exceptiontype;
			this.fieldErrors = responseStatus.data.fielderrors;
		}
		this.fieldErrorMap = fieldErrorMap;
		this.errorCodeMap = errorCodeMap;
					//console.log("CmdError.this", this);
		return this;
	};
	
	/*
	 * visually indicate field errors when applicable, and rtn struct w error msgs:
	 * 	.field: user-fixable data problems
	 * 	.user: other expected exception alerts
	 * 	.internal: unexpected internal error (cf crash, unmapped field errors, etc)
	 */
	commonspot.err.CmdError.prototype.render = function(contextWindow)
	{
		var map, fieldName, highlightIDs, position;
		var msgs = {field: "", user: "", internal: ""};
		var orderedFieldMsgs = [];
		var unorderedFieldMsgs = [];
		if(this.hasFieldErrors)
		{	// cmd refusal with field errors user can fix (if we have a mapping for the fld), typically validation
			for(var fld in this.fieldErrors)
			{
				if(!this.fieldErrors.hasOwnProperty(fld)) // skip prototype extended methods
					continue;
				// if error is a string, not an object, it's an internal exception; so far, that's only INCOMPLETE_RETURN_VALUE_EXCEPTION
				if(typeof this.fieldErrors[fld] === 'string')
				{
					msgs.internal += '<dt>' + this.errorSource(this.cmd, fld) + '</dt><dd>' + this.fieldErrors[fld].escapeHTML() + '</dd>';
				}
				else if(this.fieldErrorMap && this.fieldErrorMap[fld]) // have a mapping for this fld -- user-entered data they can change
				{
					map = this.fieldErrorMap[fld];
					fieldName = map.friendlyName || fld;
					highlightIDs = map.highlightIDs;
					position = map.position;
					if(highlightIDs)
						commonspot.util.css.addRemoveClassNameByIDs(highlightIDs, commonspot.err.FIELD_ERROR_CSS_CLASS, true, contextWindow);
					msg = (this.fieldErrors[fld].errortype == "empty") ? commonspot.err.REQUIRED_MSG : this.fieldErrors[fld].message;
					msg = '<dt title="Data type: ' + this.fieldErrors[fld].fieldtype + '">' + fieldName + '</dt><dd>' + msg.escapeHTML() + '</dd>';
					if(typeof position == "undefined") // has position only if added to cmd collection via a Command obj
						unorderedFieldMsgs.push(msg);
					else
						orderedFieldMsgs[position] = msg;
				}
				else // no mapping for this fld, not something user can fix -- internal error or missing or incorrect map
					msgs.internal += '<dt title="Data type: ' + this.fieldErrors[fld].fieldtype + '">' + this.errorSource(this.cmd, fld) + '</dt><dd>' + commonspot.err.UNMAPPED_FIELD_ERROR_MSG_START + this.fieldErrors[fld].message.escapeHTML() + '</dd>';
			}
		}
		else if(this.code === commonspot.err.COMMAND_REFUSAL_ERROR_CODE) // non-field cmd refusal
		{
			map = this.errorCodeMap ? this.errorCodeMap.getForCode(this.reasonCode) : null;
			if(map) // have specs for this reasonCode, alert like a field error and highlight requested flds
			{
				commonspot.util.css.addRemoveClassNameByIDs(map.highlightIDs, commonspot.err.FIELD_ERROR_CSS_CLASS, true, contextWindow);
				msg = '<dt>' + map.itemTitle + '</dt><dd>' + this.text.escapeHTML() + '</dd>';
				unorderedFieldMsgs.push(msg);
			}
			else
				msgs.user += '<p>' + this.text.escapeHTML() + '</p>';
		}
		else if(this.code === commonspot.err.AUTHORING_DISABLED_ERROR_CODE) // authoring is disabled, just say it
			msgs.user += '<p>' + this.text.escapeHTML() + '</p>';
		else // non-field internal error
			msgs.internal += '<dt>' + this.errorSource(this.cmd) + '</dt><dd>' + this.text.escapeHTML() + '</dd>';
			
		msgs.field = orderedFieldMsgs.join("") + unorderedFieldMsgs.join(""); // concat ordered msgs, ones w no position at end
		return msgs;
	};
	
	commonspot.err.CmdError.prototype.errorSource = function(cmd, fld)
	{
		switch(this.exceptionType)
		{
			case "CSIncompleteReturnValueException":
				return cmd + ", " + "field '" + fld + "' in return value:";
			default:
				return (fld ? cmd + "." + fld : cmd);
		}
	};
	
	
	/*
	 * CmdHandlerError class, represents a client-side js error in a cmd response handler
	 * TODO: write this
	 */
	commonspot.err.CmdHandlerError = function(cmd, error)
	{
		this.cmd = cmd;
		this.text = error.toString().escapeHTML();
		return this;
	};
	
	/*
	 * visually indicate field errors when applicable, which won't happen, and...
	 * rtn struct w error msgs:
	 * 	.field: user-fixable data problems; null
	 * 	.user: other expected exception; null
	 * 	.internal: unexpected internal error; error text
	 */
	commonspot.err.CmdHandlerError.prototype.render = function(lightboxWindow)
	{
		var msgs =
		{
			field: "",
			user: "",
			internal: "<dt>" + this.cmd + "</dt><dd>" + commonspot.err.COMMAND_HANDLER_ERROR_MSG_START + "<br />" + this.text.escapeHTML() + "</dd>"
		};
		return msgs;
	};
	
	/*
	 * FieldError class, represents a client-side validation error specific to some field
	 * TODO: write this
	 */
	commonspot.err.FieldError = function(msg, friendlyName, highlightIDs)
	{
		this.msg = msg;
		this.friendlyName = friendlyName;
		this.highlightIDs = highlightIDs;
		return this;
	};
	
	/*
	 * visually indicate field errors when applicable, which won't happen, and...
	 * rtn struct w error msgs:
	 * 	.field: user-fixable data problems; null
	 * 	.user: other expected exception; null
	 * 	.internal: unexpected internal error; error text
	 */
	commonspot.err.FieldError.prototype.render = function(lightboxWindow)
	{
		if(this.highlightIDs && this.highlightIDs != "")
			lightboxWindow.$
				.apply(lightboxWindow, this.highlightIDs.split(","))
				.addClassName(commonspot.err.FIELD_ERROR_CSS_CLASS);
		var msgs =
		{
			field: "<dt>" + this.friendlyName + "</dt><dd>" + this.msg.escapeHTML() + "</dd>",
			user: "",
			internal: ""
		};
		return msgs;
	};

	/*
	* ErrorCodeMap class, represents a mapping of error codes to error item titles and highlightIDs
	* use to handle non-validation errors (cmd refusal) as a field error when it's a known code
	* constructor args let you create first mapping immediately; call addCode to add more if needed
	*/
	commonspot.err.ErrorCodeMap = function(code, itemTitle, highlightIDs)
	{
		this.map = {};
		if(code)
			this.addCode(code, itemTitle, highlightIDs);
		return this;
	};

	commonspot.err.ErrorCodeMap.prototype.addCode = function(code, itemTitle, highlightIDs)
	{
		this.map[code] = {itemTitle: itemTitle, highlightIDs: highlightIDs};
	};

	commonspot.err.ErrorCodeMap.prototype.getForCode = function(code)
	{
		return this.map[code];
	};
	
	/*
	 * namspace for client-side value validators
	 * shouldn't be many of these, most validation is server-side
	 * validators should return passed value if it's valid, else commonspot.err.invalidMsg("Some message")
	 * validators are used by ErrorCollection.checkFieldValue, so far
	 * you can pass checkFieldValue the name of a std validator, or a reference to (not the name of) a custom function 
	 */
	commonspot.err.validators = {};
	
	commonspot.err.validators.required = function(value)
	{
		if(value == "") // assumes value has been trimmed, as by commonspotLocal.util.getValue
			value = commonspot.err.invalidMsg(commonspot.err.REQUIRED_MSG);
		return value;
	};

} // commonspot.err not built yet
</script><link id="buttons_css" type="text/css" href="/commonspot/dashboard/css/buttons.css" rel="stylesheet"><script async="" src="https://script.hotjar.com/modules-99e156707e4f41b8ac95cbab3673a480.js"></script><style type="text/css">iframe#_hjRemoteVarsFrame {display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;}</style><link id="cs_lightbox_css" type="text/css" href="/commonspot/javascript/lightbox/lightbox.css" rel="stylesheet"></head><body class="nav-dropdown template-interior-full-width body-text-small" lang="en"><a name="__topdoc__"></a><script src="/commonspot/pagemode/always-include-common.js" type="text/javascript"></script><script src="/commonspot/pagemode/always-include-moz.js" type="text/javascript"></script>
<header role="banner" class="">
<div class="layout-full-width header-title-wrap">
<div class="title-bar-wrap">
<div class="title-bar-inner-wrap">
<div class="nav-home">
<a href="/xd/" class="nav-logo ga-nav-logo" alt="Oregon Health &amp; Science University">OHSU</a>
<h1 class="nav-department">
<em><span> <div id="cs_control_2537064" class="cs_control CS_Element_Textblock"> <div class="dp_block text_with_header"> <p><a id="CP___PAGEID=145312,index.cfm,355|" href="/xd/education/schools/school-of-medicine/index.cfm">&nbsp;School of Medicine</a></p>
</div>
</div> </span>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/">Molecular Microbiology &amp; Immunology</a></em>
</h1>
</div>
<nav class="nav-utility">
<div class="append-around-high-resolution" data-set="nav-tertiary-links"><nav class="nav-tertiary">
<ul class="plain">
<li><a href="/xd/" class="ga-nav-ter">OHSU Home</a></li>
<li><a href="/xd/health/services/find-doctor.cfm" class="ga-nav-ter">Find a Doctor</a></li>
<li><a href="/xd/about/foundation/way-to-give/index.cfm?utm_source=ohsu-edu&amp;utm_medium=referral&amp;utm_content=ohsu-header&amp;utm_campaign=ohsu_internal_promos" class="ga-nav-ter">Donate</a></li>
<li><a href="/xd/about/services/human-resources/" class="ga-nav-ter">Jobs</a></li>
<li><a href="/xd/about/visiting/directions/" class="ga-nav-ter">Directions</a></li>
<li><a href="/xd/about/contact-us/" class="ga-nav-ter">Contact</a></li>
</ul>
</nav></div>
<div class="append-around-high-resolution" data-set="search"><form id="searchForm" action="/searchresults/controller.jsp" class="form-search form-site-search" name="siteSearch" method="get">
<fieldset>
<legend>Search OHSU</legend>
<ol class="ui-front">
<li>
<label for="search-section" class="accessibility">Search Section</label>
<div class="decorator-select"><select name="Nr" id="search-section" class="ga-srch-mfilterdd">
<option value="">Search all of OHSU</option>
<option value="SubSite:3078" selected="selected">Search MMI</option>
</select></div>
</li>
<li>
<label for="site-search-text" class="accessibility">Search Text</label>
<span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span><input name="Ntt" id="site-search-text-header" class="search-text search-autocomplete ga-srch-kw-top ui-autocomplete-input" placeholder="Enter keyword" maxlength="300" data-autocomplete-url="/searchapps/public.php/popular/suggest/" autocomplete="off" type="text">
<input name="Ntk" value="All" type="hidden">
<button type="submit" class="btn-search ga-srch-sub-top">Search</button>
</li>
<ul class="ui-autocomplete ui-front ui-menu ui-widget ui-widget-content ui-corner-all" id="ui-id-1" tabindex="0" style="display: none;"></ul></ol>
</fieldset>
</form></div>
<div class="append-around-high-resolution" data-set="text-resize"><div class="text-resize">
Text Size <a href="#" class="text-small ga-text-sm" data-text-size="body-text-small" aria-label="Text size small">A</a> <a href="#" class="text-medium ga-text-md" data-text-size="body-text-medium" aria-label="Text size medium">A</a> <a href="#" class="text-large ga-text-lg" data-text-size="body-text-large" aria-label="Text size large">A</a>
</div></div>
</nav><!-- / nav-utility -->
<div class="nav-options">
<a href="#" class="nav-search-toggle" aria-label="Toggle search"></a>
<a href="#" class="nav-primary-toggle ga-nav-ham" aria-label="Toggle menu"></a>
</div><!-- / nav-options -->
</div>
</div><!-- / title-bar-wrap -->
</div><!-- / layout-full-width -->
<div class="layout-full-width nav-sticky">
<div id="cs_control_2537065" class="cs_control CS_Element_CustomCF"> <div id="CS_CCF_1929733_2537065">
<div class="layout-inner-wrap-flush append-around-low-resolution" data-set="search">

</div><!-- / layout-inner-wrap-flush -->
</div> </div>
<div class="layout-inner-wrap-flush nav-wrap" style="max-height: none;">
<nav class="nav-primary">
<ul class="plain sf-js-enabled nav-items-9">
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/about/index.cfm" title="About" style="height: 104px;">About</a>
</div></li>
<li class="nav-active"><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/index.cfm" title="People" style="height: 104px;">People</a>
<ul class="nav-primary-sub-menu-1">
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/Primary-Faculty.cfm" title="Primary Faculty &amp; Labs">Primary Faculty &amp; Labs</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/research-faculty.cfm" title="Research Faculty">Research Faculty</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/joint-faculty/index.cfm" title="Joint Faculty">Joint Faculty</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/graduate-students.cfm" title="Graduate Students">Graduate Students</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/adjunct-faculty.cfm" title="Adjunct &amp; Affiliate Faculty">Adjunct &amp; Affiliate Faculty</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/administration.cfm" title="Administration">Administration</a>
</li>
</ul>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/research/index.cfm" title="Research" style="height: 104px;">Research</a>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/graduate-program/index.cfm" title="Graduate Program" style="height: 104px;">Graduate Program</a>
<ul class="nav-primary-sub-menu-1">
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/graduate-program/applying.cfm" title="Applying">Applying</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/graduate-program/program-requirements.cfm" title="Program Requirements">Program Requirements</a>
</li>
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/graduate-program/courses.cfm" title="Courses">Courses</a>
</li>
</ul>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/seminars/index.cfm" title="Seminars" style="height: 104px;">Seminars</a>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/resources/index.cfm" title="Resources" style="height: 104px;">Resources</a>
<ul class="nav-primary-sub-menu-1">
<li>
<a class="ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/resources/shared-equipment.cfm" title="Shared Equipment">Shared Equipment</a>
</li>
</ul>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/MMI-and-VGTI-Retreat.cfm" title="MMI &amp; VGTI Retreat" style="height: 104px;">MMI &amp; VGTI Retreat</a>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/mmi-internship.cfm" title="Summer Research Internship with MMI" style="height: 104px;">Summer Research Internship with MMI</a>
</div></li>
<li><div class="nav-primary-sub-menu-1-wrap">
<a class="nav-primary-link ga-nav-prim" href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/contact-us.cfm" title="Contact Us" style="height: 104px;">Contact Us</a>
</div></li>
</ul>
</nav><!-- / nav-primary -->
<div class="append-around-low-resolution" data-set="nav-tertiary-links">
<!-- / nav-tertiary -->
</div><!-- / append-around-low-resolution -->
<div class="append-around-low-resolution" data-set="text-resize">

</div>
</div><!-- / layout-inner-wrap-flush nav-wrap -->
</div><!-- / layout-full-width -->
</header>
<!-- // end:header -->
<section class="layout-full-width content" role="main">
<div class="layout-inner-wrap-flush">
<div id="cs_control_1338" class="cs_control CS_Element_LinkBar">
<nav class="nav-breadcrumbs">
<ul>
<li><a href="/xd/index.cfm">OHSU Home</a></li>
<li><a href="/xd/education/"><span>Education</span></a></li><li><a href="/xd/education/schools/"><span>Schools</span></a></li><li><a href="/xd/education/schools/school-of-medicine/"><span>School of Medicine</span></a></li><li><a href="/xd/education/schools/school-of-medicine/departments/"><span>Departments, Centers &amp; Institutes</span></a></li><li><a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/"><span>Basic Science Departments</span></a></li><li><a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/"><span>Molecular Microbiology &amp; Immunology</span></a></li><li class="nav-active"><span>People</span></li>
</ul>
</nav>
<script>
docReady(function(){
// remove the number of items
for(var itm=0; itm <0; itm++){
// if this is the first item -- add ellipses
if( itm == 0 ){
jQuery(".nav-breadcrumbs ul li:nth-child(" + parseInt(itm + 2) + ") a").addClass("show-later").closest("li").append('<a href="javascript:;" class="ellipses">...</a>');
} else {
// just hide the items
jQuery(".nav-breadcrumbs ul li:nth-child(" + parseInt(itm + 2) + ")").addClass("hide");
}
}
// add onclick
jQuery(".ellipses").on("click", function(event){
event.stopPropagation();
jQuery(".hide").removeClass("hide")
jQuery(".show-later").removeClass("show-later")
jQuery(this).remove();
return false;
});
});
</script>
</div>
<!-- // begin:navigation -->
<nav class="layout-secondary">
<a class="nav-secondary-toggle ga-nav-plus" href="#">Molecular Microbiology &amp; Immunology</a><ul class="nav-secondary">
<li>
<h3 class="nav-secondary-section-heading">
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/">Molecular Microbiology &amp; Immunology</a>
</h3>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/about/index.cfm" title="About" class="ga-nav-sec">About</a>
</li>
<li class="nav-open nav-active">
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/index.cfm" title="People" class="ga-nav-sec">People</a>
<ul class="nav-secondary-sub-menu-1">
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/Primary-Faculty.cfm" title="Primary Faculty &amp; Labs" class="ga-nav-sec">Primary Faculty &amp; Labs</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/research-faculty.cfm" title="Research Faculty" class="ga-nav-sec">Research Faculty</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/joint-faculty/index.cfm" title="Joint Faculty" class="ga-nav-sec">Joint Faculty</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/graduate-students.cfm" title="Graduate Students" class="ga-nav-sec">Graduate Students</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/adjunct-faculty.cfm" title="Adjunct &amp; Affiliate Faculty" class="ga-nav-sec">Adjunct &amp; Affiliate Faculty</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/administration.cfm" title="Administration" class="ga-nav-sec">Administration</a>
</li>
</ul>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/research/index.cfm" title="Research" class="ga-nav-sec">Research</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/graduate-program/index.cfm" title="Graduate Program" class="ga-nav-sec">Graduate Program</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/seminars/index.cfm" title="Seminars" class="ga-nav-sec">Seminars</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/resources/index.cfm" title="Resources" class="ga-nav-sec">Resources</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/MMI-and-VGTI-Retreat.cfm" title="MMI &amp; VGTI Retreat" class="ga-nav-sec">MMI &amp; VGTI Retreat</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/mmi-internship.cfm" title="Summer Research Internship with MMI" class="ga-nav-sec">Summer Research Internship with MMI</a>
</li>
<li>
<a href="/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/contact-us.cfm" title="Contact Us" class="ga-nav-sec">Contact Us</a>
</li>
</ul>
<div class="append-around-high-resolution" data-set="promos">
<div class="promos">
<div class="nav-quick-links">
<h3>Quick Links</h3>
<div id="cs_control_1340" class=""> <div class="CS_Element_Schedule" title="" id="CS_Element_navquicklinks">
<a name="schedule6309" id="schedule6309"></a><a name="CP_JUMP_6309" id="CP_JUMP_6309"></a><div id="cs_control_6309" class=""> <div class="CS_Element_Schedule" title="" id="CS_Sched_1929733_6309">
<a name="educationQuickLink6312" id="educationQuickLink6312"></a><a name="CP_JUMP_6312" id="CP_JUMP_6312"></a><div id="cs_control_6312" class="cs_control CS_Element_Textblock"> <div class="CS_Textblock_Text"><ul class="nav quicklinks">
<li><a style="" class="CP___PAGEID_1855054" href="/xd/education/teaching-and-learning-center/index.cfm">Teaching and Learning Center</a></li>
<li><a style="" class="CP___PAGEID_3945" href="/xd/education/find-departments.cfm">Find Departments and Divisions</a></li>
<li><a style="" class="CP___PAGEID_3451" href="/xd/education/find-degree-programs.cfm">Find Degree Programs</a></li>
<li><a style="" class="CP___PAGEID_2572646" href="/xd/education/international-affairs/export-controls/index.cfm">Office of Export Controls</a></li>
<li><a style="" class="CP___PAGEID_2540058" href="/xd/education/student-services/index.cfm">Academic and Student Affairs</a></li>
</ul></div> </div>
</div> </div> <div id="cs_control_2155405" class="cs_control CS_Element_CustomCF"> <div id="CS_CCF_1929733_2155405"> </div> </div>
</div> </div>
</div>
<div id="cs_control_2537260" class=""> <div class="CS_Element_Schedule" title="" id="CS_Element_navpromosetc"> </div> </div>
</div>
</div>
</nav><!-- / layout-secondary -->
<!-- // end:navigation -->
<article class="layout-primary">
<h1>People</h1>
<div id="cs_control_1341" class=""> <div class="CS_Element_Schedule" title="" id="CS_Element_primary">
<div id="cs_control_1975309" class="cs_control CS_Element_Textblock"> <div class="dp_block text_with_header"> <p>The Department of Molecular Microbiology &amp; Immunology has a diverse group of people that make up our labs, with primary faculty, joint faculty,&nbsp;graduate students, postdoctoral fellows, and&nbsp;researchers. MMI faculty are active in the scientific community and within OHSU, serving on NIH study sections, as editors for prestigious journals, and as members on university committees and councils. The department maintains close collaboration with the <a id="http://www.ohsu.edu/vgti/|" href="http://www.ohsu.edu/vgti/">Vaccine and Gene Therapy Institute</a> as well as <a target="_blank" id="http://oregon.providence.org/location-directory/p/providence-portland-medical-center/research/|" href="http://oregon.providence.org/location-directory/p/providence-portland-medical-center/research/" style="">Providence Portland Medical Center</a>, with many principal investigators at both locations holding adjunct faculty status with the department.<br>
</p>
</div>
</div>
</div> </div>
<div class="append-around-low-resolution" data-set="promos"></div>
</article><!-- / layout-primary -->
</div><!-- / layout-inner-wrap-flush -->
</section><!-- / layout-full-width content -->
<!-- // begin:footer -->
<footer>
<div class="layout-inner-wrap">
<article class="footer-about">
<a href="/xd/" class="footer-logo">Oregon Health &amp; Science University</a>
<p>Oregon Health &amp; Science University is dedicated to improving the health and quality of life for all Oregonians through excellence, innovation and leadership in health care, education and research.</p>
<p> 2001-2017 Oregon Health &amp; Science University. OHSU is an equal opportunity affirmative action institution.</p>
<p>
<a href="/xd/about/services/integrity/ips/npp.cfm">Notice of Privacy Practices</a><br>
<a href="/xd/about/services/information-technology/visitors-guests/website-accessibility.cfm">Web Browser Accessibility</a>
</p>
</article>
<nav class="footer-nav">
<div class="footer-nav-column">
<ul class="footer-nav-list">
<li><a href="/xd/">OHSU Home</a></li>
<li><a href="/xd/about/contact-us/">Contact</a></li>
</ul>
<h5 class="footer-nav-header"><a href="/xd/about/">About OHSU</a></h5>
<ul class="footer-nav-list">
<li><a href="/xd/about/visiting/directions/">Maps &amp; Directions</a></li>
<li><a href="/xd/about/services/human-resources/">Jobs</a></li>
<li><a href="/xd/education/library/">Library</a></li>
<li><a href="/xd/about/news_events/events/">Calendar</a></li>
<li><a href="/xd/about/foundation/way-to-give/index.cfm?utm_source=ohsu-edu&amp;utm_medium=referral&amp;utm_content=ohsu-footer&amp;utm_campaign=ohsu_internal_promos">Make a Gift</a></li>
<li><a href="/xd/about/accessibility.cfm">Accessibility</a></li>
<li><a href="/xd/about/vision/center-for-diversity-inclusion/">Diversity &amp; Inclusion</a></li>
<li><a href="/xd/about/services/integrity/">Integrity</a></li>
</ul>
</div>
<div class="footer-nav-column">
<h5 class="footer-nav-header"><a href="/xd/health/for-patients-visitors/">Patient Resources</a></h5>
<ul class="footer-nav-list">
<li><a href="/xd/health/for-patients-visitors/billing-insurance/">Billing &amp; Insurance</a></li>
<li><a href="/xd/health/services/find-doctor.cfm">Find a Doctor</a></li>
<li><a href="/xd/health/services/find-clinic.cfm">Find a Clinic</a></li>
<li><a href="/xd/health/for-patients-visitors/visiting-patients.cfm">For Patients &amp; Visitors</a></li>
<li><a href="/xd/health/clinical-trials/">Clinical Trials</a></li>
</ul>
<h5 class="footer-nav-header"><a href="/xd/research/">Research</a></h5>
<ul class="footer-nav-list">
<li><a href="/xd/research/about/">About</a></li>
<li><a href="/xd/research/administration/">Administration</a></li>
<li><a href="/xd/research/centers-institutes/">Centers &amp; Institutes</a></li>
<li><a href="/xd/research/research-cores/">Cores &amp; Shared Resources</a></li>
<li><a href="/xd/research/techtransfer/">Technology Transfer</a></li>
<li><a href="/xd/research/research-expertise/">Research Expertise</a></li>
</ul>
</div>
<div class="footer-nav-column">
<h5 class="footer-nav-header"><a href="/xd/education/">Education</a></h5>
<ul class="footer-nav-list">
<li><a href="/xd/education/schools/school-of-medicine/">School of Medicine</a></li>
<li><a href="/xd/education/schools/school-of-nursing/">School of Nursing</a></li>
<li><a href="/xd/education/schools/school-of-dentistry/">School of Dentistry</a></li>
<li><a href="http://ohsu-psu-sph.org/">School of Public Health</a></li>
<li><a href="http://pharmacy.oregonstate.edu/">College of Pharmacy</a></li>
<li><a href="/xd/education/admissions/">Admissions</a></li>
<li><a href="/xd/education/student-services/">Student Services</a></li>
</ul>
<h5 class="footer-nav-header"><a href="/xd/about/services/human-resources/">For Employees</a></h5>
<ul class="footer-nav-list">
<li><a href="https://o2.ohsu.edu/">O2 Intranet</a></li>
<li><a href="http://www.ohsu.edu/mail">Email</a></li>
<li><a href="http://www.ohsu.edu/Citrix">Connecting Off-Campus</a></li>
</ul>
</div>
<div class="footer-nav-column">
<ul class="footer-nav-list social">
<li class="facebook"><a href="https://www.facebook.com/OHSUedu" aria-label="OHSU on Facebook"></a></li>
<li class="youtube"><a href="http://www.youtube.com/user/OHSUvideo" aria-label="OHSU on Youtube"></a></li>
<li class="linkedin"><a href="http://www.linkedin.com/edu/oregon-health-and-science-university-19198" aria-label="OHSU on LinkedIn"></a></li>
<li class="twitter"><a href="https://twitter.com/OHSUNews" aria-label="OHSU on Twitter"></a></li>
</ul>
</div>
</nav>
</div>
</footer>
<div class="nav-underlay"></div>
<script src="/xd/assets/js/foot.js"></script>
<script>
// run at initialization time
jQuery(function($){
// glossary popup functionality
$.ajaxSetup({async:false});
$('.glossaryDefinition:not(span)').removeClass('glossaryDefinition').wrapInner('<span class="glossaryDefinition"></span>');
});
</script>
<!-- // csonly:start -->
<script>
var anUrl = "/fusionreactor/UEM.cfm?db=78&wr=366&s=0BAC9815B95BC872837FA018DBF77D2F&t=3448012";document.write(unescape("%3Cscript src='/fusionreactor/UEMJS.cfm' type='text/javascript'%3E%3C/script%3E"));
</script><script src="/fusionreactor/UEMJS.cfm" type="text/javascript"></script>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5K25KJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5K25KJ');</script>
<!-- End Google Tag Manager -->
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TRPDVK"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','HCMdataLayer','GTM-TRPDVK');</script>
<!-- End Google Tag Manager -->
<!-- // csonly:end -->
<script>
// check to see if another page has added google analytics
if( typeof arGAccounts == "object" ){
arGAccounts.push("UA-34339854-1");
} else {
var arGAccounts = ["UA-34339854-1"];
}
</script>
<!-- // end:footer --><div style="display:block; clear:left; padding:0px; font-family:Verdana,Arial; font-size:10px; color:gray;"></div>
		<script type="text/javascript">
		<!--
			var jsPageContributeMode = 'read';
			var jsPageSessionContributeMode = 'read';
			
			var jsPageAuthorMode = 0;
			var jsPageEditMode = 0;

			
			if(!commonspot)
				var commonspot = {};
			commonspot.csPage = {};

			
				commonspot.csPage.url = '/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/index.cfm';
			

			commonspot.csPage.id = 1929733;
			commonspot.csPage.title = 'People';

			commonspot.csPage.pagetype = 0;
			commonspot.csPage.publicationState = 'Published Page';
			commonspot.csPage.siteRoot = '/xd/';
			commonspot.csPage.subsiteRoot = '/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/';
			commonspot.csPage.mode = jsPageSessionContributeMode;
			commonspot.csPage.authorok = 0;
			commonspot.csPage.approvalstatus = 0;
			commonspot.csPage.showContainerUI = 0;
			commonspot.csPage.requestedVersionTimestamp = '';
			commonspot.csPage.userRights = {};
			commonspot.csPage.userRights.isLoggedIn = 0;
			commonspot.csPage.userRights.licensedContributor = 0;
			commonspot.csPage.userRights.read = 1;
			commonspot.csPage.userRights.author = 0;
			commonspot.csPage.userRights.edit = 0;
			commonspot.csPage.userRights.approve = 0;
			commonspot.csPage.userRights.history = 0;
			commonspot.csPage.userRights.design = 0;
			commonspot.csPage.userRights.admin = 0;
			commonspot.csPage.userRights.subsiteAdmin = 0;
			commonspot.csPage.userRights.siteAdmin = 0;
			commonspot.csPage.userRights.customerAdmin = 0;
			commonspot.csPage.userRights.serverAdmin = 0;

			commonspot.csPage.enabledMenuClasses = '';
			
			commonspot.csPage.visibleMenuClasses = '';

			
			commonspot.csPage.subsiteContext = {};
			commonspot.csPage.subsiteContext.sitetype = 0;
			commonspot.csPage.subsiteContext.siteid = 3;
			commonspot.csPage.subsiteContext.subsiteid = 3080;
			commonspot.csPage.subsiteContext.siteurl = '/xd/';
			commonspot.csPage.subsiteContext.subsiteurl = '/xd/education/schools/school-of-medicine/departments/basic-science-departments/molecular-microbiology-and-immunology/people/';
			commonspot.csPage.subsiteContext.sitename = 'xd';
			commonspot.csPage.subsiteContext.subsitename = 'people';
			commonspot.csPage.subsiteContext.menucontexttimestamp = '1497908514203';
			commonspot.csPage.serveradminurl = "/commonspot/admin/";
			if (parent.commonspot)
				parent.commonspot.csPage = commonspot.csPage;
			var doLviewRedirect;
			if(parent &&
						parent.commonspot &&
						parent.commonspot.lview &&
						!doLviewRedirect &&
						parent.commonspot.lightbox &&
						parent.commonspot.lightbox.stack.length == 0)
			{
			
				commonspot.csPage.showPageSubmit = false;
			
				onPageArrival = function()
				{
					parent.commonspot.lview.currentPage.onPageArrival( commonspot.csPage );
				};
				onPageUnload = function()
				{
					parent.commonspot.lview.currentPage.onPageUnload();
				};
				parent.Spry.Utils.addEventListener(window, 'load', onPageArrival, false);
				parent.Spry.Utils.addEventListener(window, 'unload', onPageUnload, false);
			}
		

		// -->
		</script>
<script type="text/javascript">
<!--
	if (typeof parent.commonspot == 'undefined' || typeof parent.commonspot.lview == 'undefined')
		loadNonDashboardFiles();
	else if (parent.commonspot && typeof newWindow == 'undefined')
	{
		var arrFiles = 
				[
					{fileName: '/commonspot/javascript/lightbox/overrides.js', fileType: 'script', fileID: 'cs_overrides'},
					{fileName: '/commonspot/javascript/lightbox/window_ref.js', fileType: 'script', fileID: 'cs_windowref'}
				];
		
		loadDashboardFiles(arrFiles);
	}	
//-->
</script>

<iframe style="display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;" name="_hjRemoteVarsFrame" title="_hjRemoteVarsFrame" id="_hjRemoteVarsFrame" src="https://vars.hotjar.com/rcj-99d43ead6bdf30da8ed5ffcb4f17100c.html"></iframe><div id="ads"></div><div style="display: none; visibility: hidden;"><script>if("undefined"==typeof jQuery){var script=document.createElement("script");script.type="text/javascript";script.src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js";document.getElementsByTagName("head")[0].appendChild(script)}function arrayDoesNotContain(e,c){for(var a=0;a<e.length;a++)if(e[a]==c)return!1;return!0}
function dataLayerPush(e){var c=[],a;for(a in e)c.push(a);if("HCM"===e.container)for(a=0;a<HCM_UA_Array.length;a++){for(var d={},b=0;b<c.length;b++)d[c[b]]=e[c[b]];d.department=HCM_UA_Array[a];HCMdataLayer.push(d)}else{for(a=0;a<HCM_UA_Array.length;a++){d={};for(b=0;b<c.length;b++)d[c[b]]=e[c[b]];d.department=HCM_UA_Array[a];dataLayer.push(d);HCMdataLayer.push(d)}for(a=0;a<OHSU_UA_Array.length;a++){d={};for(b=0;b<c.length;b++)d[c[b]]=e[c[b]];d.department=OHSU_UA_Array[a];dataLayer.push(d)}}}
setTimeout("dataLayer.push({'event': 'customFuncLoad'});HCMdataLayer.push({'event': 'customFuncLoad'});",500);</script></div><div style="display: none; visibility: hidden;"><script>jQuery(".promo").each(function(){var a=jQuery(this).find("a[class]").attr("class");-1<a.indexOf("ga-promo-img")?jQuery(this).find("a").addClass("ga-promo-img"):-1<a.indexOf("ga-promo-btn")&&jQuery(this).find("a").addClass("ga-promo-btn")});</script></div></body></html>